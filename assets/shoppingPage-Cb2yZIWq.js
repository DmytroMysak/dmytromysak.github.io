import{Q as Z}from"./QCardSection-NG0FHRHY.js";import{Q as X}from"./QCard-C4N2OtfF.js";import{F as V,Q as A}from"./QCardActions-CLJaF5Bu.js";import{J as d,x as G,F as ee,n as te,aw as W,B as $,R as u,av as j,a3 as E,am as K,y as ae,A as oe,I as O,K as le,ax as ie,T as ne,U as re,ay as se,W as ce,V as de,N as ue,az as fe,aA as ge,ab as me,aB as pe,aC as be,Y as he,Z as v,ag as ve,a1 as s,aj as Q,a0 as n,a4 as T,a5 as C,$ as q,a7 as R,ar as D,as as I}from"./index-CmuCMgBa.js";import{Q as _e}from"./QSkeleton-BJfC7NnZ.js";import{u as ye}from"./QInput-Lm2QrpE2.js";import{P as Se,Q as Ce}from"./paginationPageSize-D7MNSaKA.js";import{Q as qe}from"./QPage-Blsos2c0.js";import{f as ke}from"./format-Dq9uPdyY.js";import{S as xe}from"./shopping.service-CSEzRJCL.js";import{s as Oe,S as Be}from"./searchFilter-B46quSSD.js";import{L as Le}from"./listItem-DaZeiiGx.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./QSelect-B1fV5hfF.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./History-BRlARYUr.js";import"./rtl-DFPa-2ov.js";import"./is-BddHB8T5.js";import"./QBtnDropdown-BGAbgpwa.js";import"./ClosePopup-Bnjv8jFB.js";import"./random.utils--ZVVX1T7.js";import"./folder.service-3sR9fq5W.js";import"./recipe.service-B2BkU8jg.js";import"./QCheckbox-WeQmrjpL.js";import"./QForm-BI170nwI.js";import"./searchAutocomplete-DxeGRu9i.js";import"./QImg-BWxTlY2N.js";const Pe=["top","right","bottom","left"],z={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Pe.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function U(e,a){return{formClass:d(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:d(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:d(()=>{if(e.externalLabel===!0){const c=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(c===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const J={start:"self-end",center:"self-center",end:"self-start"},we=Object.keys(J),H=G({name:"QFabAction",props:{...z,icon:{type:String,default:""},anchor:{type:String,validator:e=>we.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:c}){const t=ee(W,()=>({showing:{value:!0},onChildClick:te})),{formClass:f,labelProps:g}=U(e,t.showing),i=d(()=>{const o=J[e.anchor];return f.value+(o!==void 0?` ${o}`:"")}),m=d(()=>e.disable===!0||t.showing.value!==!0);function b(o){t.onChildClick(o),c("click",o)}function _(){const o=[];return a.icon!==void 0?o.push(a.icon()):e.icon!==""&&o.push(u(E,{name:e.icon})),(e.label!==""||a.label!==void 0)&&o[g.value.action](u("div",g.value.data,a.label!==void 0?a.label():[e.label])),K(a.default,o)}const y=$();return Object.assign(y.proxy,{click:b}),()=>u(j,{class:i.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:m.value,onClick:b},_)}}),Fe=["up","right","down","left"],Qe=["left","center","right"],Te=G({name:"QFab",props:{...z,...ae,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...z.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Fe.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Qe.includes(e)}},emits:oe,setup(e,{slots:a}){const c=O(null),t=O(e.modelValue===!0),f=ye(),{proxy:{$q:g}}=$(),{formClass:i,labelProps:m}=U(e,t),b=d(()=>e.persistent!==!0),{hide:_,toggle:y}=le({showing:t,hideOnRouteChange:b}),o=d(()=>({opened:t.value})),B=d(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${i.value}`+(t.value===!0?" q-fab--opened":" q-fab--closed")),L=d(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${t.value===!0?"opened":"closed"}`),p=d(()=>{const l={id:f.value,role:"menu"};return t.value!==!0&&(l["aria-hidden"]="true"),l}),P=d(()=>`q-fab__icon-holder  q-fab__icon-holder--${t.value===!0?"opened":"closed"}`);function S(l,w){const F=a[l],k=`q-fab__${l} absolute-full`;return F===void 0?u(E,{class:k,name:e[w]||g.iconSet.fab[w]}):u("div",{class:k},F(o.value))}function M(){const l=[];return e.hideIcon!==!0&&l.push(u("div",{class:P.value},[S("icon","icon"),S("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&l[m.value.action](u("div",m.value.data,a.label!==void 0?a.label(o.value):[e.label])),K(a.tooltip,l)}return ie(W,{showing:t,onChildClick(l){_(l),c.value!==null&&c.value.$el.focus()}}),()=>u("div",{class:B.value},[u(j,{ref:c,class:i.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":t.value===!0?"true":"false","aria-haspopup":"true","aria-controls":f.value,onClick:y},M),u("div",{class:L.value,...p.value},ne(a.default))])}}),Me=re({__name:"shoppingPage",setup(e,{expose:a}){a();const{capitalize:c}=ke,t=se(),f=ce(),{t:g}=de({useScope:"global"}),{getShopping:i,editShopping:m,removeShopping:b}=xe(),{filter:_,search:y,page:o,pageSize:B,sortBy:L}=Oe(V.Shopping),p=O([]),P=O(0),S=O(!1),M=[{title:"delete",icon:be}];function l(){S.value=!0,i({filter:_.value,search:y.value,page:o.value,pageSize:B.value,sortBy:L.value}).then(r=>{p.value=r.items,P.value=r.totalFiltered}).finally(()=>{S.value=!1})}function w(r){f.push({name:r})}const F=()=>f.push({name:"MergeShopping"}),k={"favorite.add":async r=>{const h=await m(r.id,{favorite:!0});p.value=p.value.map(x=>x.id===h?.id?h:x)},"favorite.remove":async r=>{const h=await m(r.id,{favorite:!1});p.value=p.value.map(x=>x.id===h?.id?h:x)},delete:async r=>{t.dialog({title:c(g("delete")),message:g("deleteConfirmation",{item:r.name}),cancel:!0,persistent:!0}).onOk(async()=>{await b(r.id),l()})}},Y=(r,h)=>k[r]?.(h);ue(l);const N={capitalize:c,$q:t,router:f,t:g,getShopping:i,editShopping:m,removeShopping:b,filter:_,search:y,page:o,pageSize:B,sortBy:L,shoppingList:p,totalFiltered:P,isLoading:S,menuOptions:M,loadShopping:l,goTo:w,merge:F,itemMenuOptionHandler:k,menuHandler:Y,get FilterType(){return V},get ionGitMergeOutline(){return fe},get ionAddOutline(){return ge},get ionRestaurantOutline(){return me},get ionDuplicateOutline(){return pe},ListItem:Le,SearchFilter:Be,Pagination:Se};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Ae={class:"row q-col-gutter-x-md q-col-gutter-y-md"},Ie={class:"col"},ze={class:"gt-sm q-pl-xs"},je={key:0,class:"row q-col-gutter-x-md q-col-gutter-y-md"},Ne={key:0,class:"flex flex-center full-width"},Ve={class:"text-h5"},Re={key:1,class:"row q-gutter-md"};function De(e,a,c,t,f,g){return v(),ve(qe,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md gap-down"},{default:s(()=>[Q("div",Ae,[Q("div",Ie,[n(X,{class:"q-pa-sm"},{default:s(()=>[n(Z,{horizontal:"",class:"text-h5 text-capitalize ellipsis"},{default:s(()=>[T(C(e.$t("shopping.name")),1)]),_:1})]),_:1})])]),n(t.SearchFilter,{onOnChange:t.loadShopping,"filter-key":t.FilterType.Shopping},{additionalButtons:s(()=>[n(j,{color:"accent",class:"text-capitalize q-mr-sm",outline:"",icon:t.ionGitMergeOutline,onClick:t.merge},{default:s(()=>[Q("span",ze,C(e.$t("shopping.merge")),1),n(A,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:s(()=>[T(C(e.$t("shopping.merge")),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["filter-key"]),t.isLoading?I("",!0):(v(),q("div",je,[(v(!0),q(R,null,D(t.shoppingList,i=>(v(),q("div",{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",key:i.id},[n(t.ListItem,{item:i,"menu-options":t.menuOptions,"on-click-router-name":"ShoppingDetail",onOnChange:t.menuHandler},null,8,["item"])]))),128)),n(t.Pagination,{"filter-key":t.FilterType.Shopping,"total-filtered":t.totalFiltered,onOnChange:t.loadShopping},null,8,["filter-key","total-filtered"]),t.shoppingList.length?I("",!0):(v(),q("div",Ne,[Q("div",Ve,C(e.$t("emptyListMessage")),1)]))])),t.isLoading?(v(),q("div",Re,[(v(),q(R,null,D(5,i=>n(_e,{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",height:"300px",key:i})),64))])):I("",!0),n(Ce,{position:"bottom-right",offset:[18,18]},{default:s(()=>[n(Te,{direction:"up",icon:t.ionAddOutline,disable:t.isLoading,color:"primary"},{default:s(()=>[n(H,{color:"primary",icon:t.ionRestaurantOutline,onClick:a[0]||(a[0]=i=>t.goTo("CreateShoppingMealPlanner"))},{default:s(()=>[n(A,{anchor:"top left",offset:[14,30],delay:150},{default:s(()=>[T(C(t.capitalize(e.$t("shopping.createTooltipMealPlanner"))),1)]),_:1})]),_:1},8,["icon"]),n(H,{color:"primary",icon:t.ionDuplicateOutline,onClick:a[1]||(a[1]=i=>t.goTo("CreateShopping"))},{default:s(()=>[n(A,{anchor:"top left",offset:[14,30],delay:150},{default:s(()=>[T(C(t.capitalize(e.$t("shopping.createTooltipNew"))),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["icon","disable"])]),_:1})]),_:1})}const ht=he(Me,[["render",De],["__scopeId","data-v-ec6d3bb5"],["__file","shoppingPage.vue"]]);export{ht as default};
