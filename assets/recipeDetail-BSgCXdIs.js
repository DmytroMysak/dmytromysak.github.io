import{Q as Go}from"./QInnerLoading-86XDDgru.js";import{Q as Qo}from"./QImg-BWxTlY2N.js";import{Q as q}from"./QCardSection-NG0FHRHY.js";import{Q as ze}from"./QCard-C4N2OtfF.js";import{U as xe,aH as fe,aI as Ue,V as dt,I as F,N as Oe,L as ke,aC as Xe,Y as Re,Z as y,$,aj as D,a0 as d,a1 as u,a4 as R,a5 as b,a6 as Ut,aF as Yo,aG as Xo,a2 as at,av as j,aJ as ut,aR as Ft,ag as w,a7 as Ae,ar as Dt,ah as Ko,as as O,ai as st,aK as It,n as Zo,T as Jo,R as V,s as $o,bv as Eo,r as co,a3 as ye,x as en,z as tn,B as on,C as nn,J as oe,O as ln,v as rn,M as an,bw as sn,Q as cn,b0 as dn,aU as uo,bx as mo,bm as ot,bd as un,be as mn,bb as fn,by as pn,bz as gn,X as hn,W as yn,aD as _n,bA as vn,bB as Tn}from"./index-CmuCMgBa.js";import{Q as bn}from"./QPage-Blsos2c0.js";import{R as En}from"./recipe.service-B2BkU8jg.js";import{B as Cn}from"./breadcrumb.service-B5JON7r2.js";import{V as mt}from"./validation.service-Bh9qf873.js";import{a as ft,b as Sn,E as Co}from"./editableText-Bw7tCjDH.js";import{A as So,b as Nt,a as Ao,Q as At}from"./QSelect-B1fV5hfF.js";import{Q as An}from"./QCheckbox-WeQmrjpL.js";import{Q as re,a as ct}from"./QCardActions-CLJaF5Bu.js";import{Q as ko}from"./QForm-BI170nwI.js";import{I as xo}from"./ingredient.constant-DXTw5qQM.js";import{Q as Ye,d as kn}from"./QInput-Lm2QrpE2.js";import{f as Vt}from"./format-Dq9uPdyY.js";import{F as xn}from"./favoriteIcon-D9PrWxBc.js";import{Q as On}from"./QBtnDropdown-BGAbgpwa.js";import{u as Rn,a as wn,b as Ln}from"./use-fullscreen-D4Edpx92.js";import{b as Mn,a as Dn,c as In,d as Nn}from"./index-BkI8a_iM.js";import{F as Pn}from"./folder.service-3sR9fq5W.js";import{S as zn}from"./searchAutocomplete-DxeGRu9i.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./History-BRlARYUr.js";import"./debounce-Dh_zIq8Y.js";import"./rtl-DFPa-2ov.js";import"./is-BddHB8T5.js";import"./uid-Bzmka5Fh.js";const Un="/recipe-placeholder.jpg",Fn={name:"Untitled",imageUrl:Un,category:"",ingredients:[],instruction:"",peopleCount:void 0},Vn=xe({__name:"editIngredient",props:{modelValue:{required:!0},modelModifiers:{}},emits:fe(["onDelete"],["update:modelValue"]),setup(o,{expose:t,emit:l}){t();const e=Ue(o,"modelValue"),a=l,{capitalize:p}=Vt,{getAutocomplete:i}=So(),{required:m,numeric:k,minValue:C}=mt(),{locale:g,t:v}=dt({useScope:"global"}),E=F([]),_=F(),I=(L,W)=>{i("ingredients",{search:L}).then(G=>{W(()=>{E.value=G})})};Oe(()=>{ke(g,()=>{_.value=Object.values(xo).map(L=>({label:v(`ingredients.type.${L}`),value:L,tooltip:p(v(`ingredients.tooltip.${L}`))}))},{immediate:!0})});const M={model:e,emit:a,capitalize:p,getAutocomplete:i,required:m,numeric:k,minValue:C,locale:g,t:v,options:E,ingredientsType:_,filterValue:I,get ionCloseOutline(){return Xe}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),Bn={class:"row q-col-gutter-x-md q-col-gutter-y-md"},qn={class:"col col-xs-6 col-sm-6 col-md-6 col-lg-7 col-xl-7"},Hn={class:"col col-xs-3 col-sm-2 col-md-2 col-lg-2 col-xl-2"},Wn={class:"col col-xs-2 col-sm-2 col-md-2 col-lg-2 col-xl-2"},jn={class:"col col-xs-1 col-sm-1 col-md-1 col-lg-1 col-xl-1"};function Gn(o,t,l,e,a,p){return y(),$("div",Bn,[D("div",qn,[d(Nt,{dense:"","use-input":"","fill-input":"","no-error-icon":"","hide-dropdown-icon":"","hide-selected":"","input-debounce":"200",rules:[e.required],hint:e.capitalize(e.t("ingredients.name")),modelValue:e.model.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model.name=i),onInputValue:t[1]||(t[1]=i=>e.model.name=i),options:e.options,onFilter:e.filterValue},null,8,["rules","hint","modelValue","options"])]),D("div",Hn,[d(Ye,{dense:"","no-error-icon":"",rules:[e.required,e.numeric,e.minValue(0)],hint:e.capitalize(e.t("ingredients.amount")),step:"0.001",type:"text",inputmode:"numeric",modelValue:e.model.number,"onUpdate:modelValue":t[2]||(t[2]=i=>e.model.number=i)},null,8,["rules","hint","modelValue"])]),D("div",Wn,[d(Nt,{dense:"","no-error-icon":"","hide-dropdown-icon":"","emit-value":"","map-options":"",hint:e.capitalize(e.t("ingredients.units")),modelValue:e.model.type,"onUpdate:modelValue":t[3]||(t[3]=i=>e.model.type=i),options:e.ingredientsType,rules:[e.required]},{selected:u(()=>[R(b(e.t(`ingredients.type.${e.model.type}`))+" ",1),d(re,{anchor:"top middle",offset:[14,30],delay:150},{default:u(()=>[R(b(e.capitalize(e.t(`ingredients.tooltip.${e.model.type}`))),1)]),_:1})]),option:u(i=>[d(Ut,Yo(Xo(i.itemProps)),{default:u(()=>[d(at,null,{default:u(()=>[d(Ao,{class:"ellipsis"},{default:u(()=>[R(b(i.opt.tooltip),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","rules"])]),D("div",jn,[d(j,{flat:"",round:"",class:"q-mt-sm",icon:e.ionCloseOutline,onClick:t[4]||(t[4]=i=>e.emit("onDelete"))},{default:u(()=>[d(re,{anchor:"top middle",offset:[14,30],delay:150},{default:u(()=>[R(b(o.$t("delete")),1)]),_:1})]),_:1},8,["icon"])])])}const Qn=Re(Vn,[["render",Gn],["__file","editIngredient.vue"]]),Yn=xe({__name:"editableIngredients",props:fe({createMode:{type:Boolean},rules:{},editTransform:{}},{modelValue:{required:!1,default:[]},modelModifiers:{}}),emits:fe(["onCheckboxChange","onChange"],["update:modelValue"]),setup(o,{expose:t,emit:l}){const e=Ue(o,"modelValue"),a=o,p=l,{cancel:i,enableEditMode:m,isEditMode:k,editedValue:C,mountEditableService:g,submit:v,isLoading:E}=ft(a,p,e);t({submit:v});const{t:_}=dt({useScope:"global"}),I=F({}),M=S=>C.value?.splice(S,1),L=()=>C.value?.push({name:"",number:1,type:xo.Pieces});function W(){C.value=C.value.map(S=>(S.number=Number(S.number),S)),v()}Oe(()=>{g(),ke(e,()=>{e.value.forEach(S=>{I.value[S.name]=!1})},{immediate:!0}),ke(k,()=>{k.value&&!C.value.length&&L()},{immediate:!0})});const G={model:e,props:a,emit:p,cancel:i,enableEditMode:m,isEditMode:k,editedValue:C,mountEditableService:g,submit:v,isLoading:E,t:_,checkbox:I,deleteItem:M,addItem:L,onSubmit:W,get ionCloseOutline(){return Xe},get ionCheckmarkOutline(){return ut},get ionColorWandOutline(){return Ft},EditIngredient:Qn};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),Xn={class:"row q-col-gutter-x-md q-col-gutter-y-md"},Kn={class:"col-12"};function Zn(o,t,l,e,a,p){return y(),$(Ae,null,[e.isEditMode?O("",!0):(y(),w(q,{key:0},{default:u(()=>[d(Ko,null,{default:u(()=>[(y(!0),$(Ae,null,Dt(e.model,i=>(y(),w(Ut,{key:i.name},{default:u(()=>[d(at,null,{default:u(()=>[d(An,{modelValue:e.checkbox[i.name],"onUpdate:modelValue":m=>e.checkbox[i.name]=m,"toggle-indeterminate":!1},{default:u(()=>[d(Ao,null,{default:u(()=>[R(b(`${i?.name} - ${i?.number} ${e.t(`ingredients.type.${i?.type}`)}`),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),e.isEditMode?O("",!0):(y(),w(ct,{key:1},{default:u(()=>[d(st),d(j,{icon:e.ionColorWandOutline,onClick:t[0]||(t[0]=i=>e.enableEditMode()),color:"primary"},{default:u(()=>[R(b(e.model.length?o.$t("change"):o.$t("recipeDetail.createIngredients")),1)]),_:1},8,["icon"])]),_:1})),e.isEditMode?(y(),w(ko,{key:2,class:"px-4 mt-n2",onKeyup:t[4]||(t[4]=It(i=>e.cancel(),["esc"]))},{default:u(()=>[d(q,null,{default:u(()=>[(y(!0),$(Ae,null,Dt(e.editedValue,(i,m)=>(y(),w(e.EditIngredient,{key:m,modelValue:e.editedValue[m],"onUpdate:modelValue":k=>e.editedValue[m]=k,"is-edit-mode":!0,onOnDelete:k=>e.deleteItem(m)},null,8,["modelValue","onUpdate:modelValue","onOnDelete"]))),128)),D("div",Xn,[D("div",Kn,[d(j,{class:"q-mt-lg full-width",onClick:t[1]||(t[1]=i=>e.addItem()),color:"secondary"},{default:u(()=>[R(b(o.$t("ingredients.addMore")),1)]),_:1})])])]),_:1}),e.props.createMode?O("",!0):(y(),w(ct,{key:0},{default:u(()=>[d(st),d(j,{loading:e.isLoading,onClick:t[2]||(t[2]=i=>e.onSubmit()),icon:e.ionCheckmarkOutline,color:"primary"},{default:u(()=>[R(b(o.$t("save")),1)]),_:1},8,["loading","icon"]),d(j,{icon:e.ionCloseOutline,onClick:t[3]||(t[3]=i=>e.cancel())},{default:u(()=>[R(b(o.$t("cancel")),1)]),_:1},8,["icon"])]),_:1}))]),_:1})):O("",!0)],64)}const Jn=Re(Yn,[["render",Zn],["__file","editableIngredients.vue"]]);function Oo(o,t){if(t&&o===t)return null;const l=o.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(l)===!0)return o;const e=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,a=e.display;return a==="block"||a==="table"?o:Oo(o.parentNode)}function kt(o,t,l){return!o||o===document.body?!1:l===!0&&o===t||(t===document?document.body:t).contains(o.parentNode)}function Ro(o,t,l){if(l||(l=document.createRange(),l.selectNode(o),l.setStart(o,0)),t.count===0)l.setEnd(o,t.count);else if(t.count>0)if(o.nodeType===Node.TEXT_NODE)o.textContent.length<t.count?t.count-=o.textContent.length:(l.setEnd(o,t.count),t.count=0);else for(let e=0;t.count!==0&&e<o.childNodes.length;e++)l=Ro(o.childNodes[e],t,l);return l}const $n=/^https?:\/\//;class ei{constructor(t,l){this.el=t,this.eVm=l,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(kt(t.anchorNode,this.el,!0)&&kt(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const l=t.startContainer;return l.nodeType===document.ELEMENT_NODE?l:l.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Oo(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const l=document.createRange(),e=document.getSelection();t!==null?(l.setStart(t.startContainer,t.startOffset),l.setEnd(t.endContainer,t.endOffset),e.removeAllRanges(),e.addRange(l)):(e.selectAllChildren(this.el),e.collapseToEnd())}savePosition(){let t=-1,l;const e=document.getSelection(),a=this.el.parentNode;if(e.focusNode&&kt(e.focusNode,a))for(l=e.focusNode,t=e.focusOffset;l&&l!==a;)l!==this.el&&l.previousSibling?(l=l.previousSibling,t+=l.textContent.length):l=l.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const l=window.getSelection(),e=Ro(this.el,{count:this.savedPos});e&&(e.collapse(!1),l.removeAllRanges(),l.addRange(e))}}hasParent(t,l){const e=l?this.parent:this.blockParent;return e!==null?e.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,l,e=this.parent){return e===null?!1:t.includes(e.nodeName.toLowerCase())===!0?!0:l===!0?this.hasParents(t,l,e.parentNode):!1}is(t,l){if(this.selection===null)return!1;switch(t){case"formatBlock":return l==="DIV"&&this.parent===this.el||this.hasParent(l,l==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===l;case"fontName":const e=document.queryCommandValue(t);return e===`"${l}"`||e===l;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const a=document.queryCommandState(t);return l!==void 0?a===l:a}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,l,e=Zo){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(l)&&this.is(t,l)&&(t="outdent",l=null),l==="PRE"&&this.is(t,"PRE")&&(l="P");else if(t==="print"){e();const a=window.open();a.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),a.print(),a.close();return}else if(t==="link"){const a=this.getParentAttribute("href");if(a===null){const p=this.selectWord(this.selection),i=p?p.toString():"";if(!i.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=$n.test(i)?i:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(p.getRangeAt(0))}else this.eVm.editLinkUrl.value=a,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),e();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),e();return}document.execCommand(t,!1,l),e()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const l=document.createRange();l.setStart(t.anchorNode,t.anchorOffset),l.setEnd(t.focusNode,t.focusOffset);const e=l.collapsed?["backward","forward"]:["forward","backward"];l.detach();const a=t.focusNode,p=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",e[0],"character"),t.modify("move",e[1],"word"),t.extend(a,p),t.modify("extend",e[1],"character"),t.modify("extend",e[0],"word"),t}}function wo(o,t,l){t.handler?t.handler(o,l,l.caret):l.runCmd(t.cmd,t.param)}function Bt(o){return V("div",{class:"q-editor__toolbar-group"},o)}function Lo(o,t,l,e=!1){const a=e||(t.type==="toggle"?t.toggled?t.toggled(o):t.cmd&&o.caret.is(t.cmd,t.param):!1),p=[];if(t.tip&&o.$q.platform.is.desktop){const i=t.key?V("div",[V("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;p.push(V(re,{delay:1e3},()=>[V("div",{innerHTML:t.tip}),i]))}return V(j,{...o.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:a?t.toggleColor||o.props.toolbarToggleColor:t.color||o.props.toolbarColor,textColor:a&&!o.props.toolbarPush?null:t.textColor||o.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(o):!0:!1,size:"sm",onClick(i){l&&l(),wo(i,t,o)}},()=>p)}function ti(o,t){const l=t.list==="only-icons";let e=t.label,a=t.icon!==null?t.icon:void 0,p,i;function m(){C.component.proxy.hide()}if(l)i=t.options.map(g=>{const v=g.type===void 0?o.caret.is(g.cmd,g.param):!1;return v&&(e=g.tip,a=g.icon!==null?g.icon:void 0),Lo(o,g,m,v)}),p=o.toolbarBackgroundClass.value,i=[Bt(i)];else{const g=o.props.toolbarToggleColor!==void 0?`text-${o.props.toolbarToggleColor}`:null,v=o.props.toolbarTextColor!==void 0?`text-${o.props.toolbarTextColor}`:null,E=t.list==="no-icons";i=t.options.map(_=>{const I=_.disable?_.disable(o):!1,M=_.type===void 0?o.caret.is(_.cmd,_.param):!1;M&&(e=_.tip,a=_.icon!==null?_.icon:void 0);const L=_.htmlTip;return V(Ut,{active:M,activeClass:g,clickable:!0,disable:I,dense:!0,onClick(W){m(),o.contentRef.value!==null&&o.contentRef.value.focus(),o.caret.restore(),wo(W,_,o)}},()=>[E===!0?null:V(at,{class:M?g:v,side:!0},()=>V(ye,{name:_.icon!==null?_.icon:void 0})),V(at,L?()=>V("div",{class:"text-no-wrap",innerHTML:_.htmlTip}):_.tip?()=>V("div",{class:"text-no-wrap"},_.tip):void 0)])}),p=[o.toolbarBackgroundClass.value,v]}const k=t.highlight&&e!==t.label,C=V(On,{...o.buttonProps.value,noCaps:!0,noWrap:!0,color:k?o.props.toolbarToggleColor:o.props.toolbarColor,textColor:k&&!o.props.toolbarPush?null:o.props.toolbarTextColor,label:t.fixedLabel?t.label:e,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:a,contentClass:p,onShow:g=>o.emit("dropdownShow",g),onHide:g=>o.emit("dropdownHide",g),onBeforeShow:g=>o.emit("dropdownBeforeShow",g),onBeforeHide:g=>o.emit("dropdownBeforeHide",g)},()=>i);return C}function oi(o){if(o.caret)return o.buttons.value.filter(t=>!o.isViewingSource.value||t.find(l=>l.cmd==="viewsource")).map(t=>Bt(t.map(l=>o.isViewingSource.value&&l.cmd!=="viewsource"?!1:l.type==="slot"?Jo(o.slots[l.slot]):l.type==="dropdown"?ti(o,l):Lo(o,l))))}function ni(o,t,l,e={}){const a=Object.keys(e);if(a.length===0)return{};const p={default_font:{cmd:"fontName",param:o,icon:l,tip:t}};return a.forEach(i=>{const m=e[i];p[i]={cmd:"fontName",param:m,icon:l,tip:m,htmlTip:`<font face="${m}">${m}</font>`}}),p}function ii(o){if(o.caret){const t=o.props.toolbarColor||o.props.toolbarTextColor;let l=o.editLinkUrl.value;const e=()=>{o.caret.restore(),l!==o.editLinkUrl.value&&document.execCommand("createLink",!1,l===""?" ":l),o.editLinkUrl.value=null};return[V("div",{class:`q-mx-xs text-${t}`},`${o.$q.lang.editor.url}: `),V("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:l,onInput:a=>{$o(a),l=a.target.value},onKeydown:a=>{if(Eo(a)!==!0)switch(a.keyCode){case 13:return co(a),e();case 27:co(a),o.caret.restore(),(!o.editLinkUrl.value||o.editLinkUrl.value==="https://")&&document.execCommand("unlink"),o.editLinkUrl.value=null;break}}}),Bt([V(j,{key:"qedt_btm_rem",tabindex:-1,...o.buttonProps.value,label:o.$q.lang.label.remove,noCaps:!0,onClick:()=>{o.caret.restore(),document.execCommand("unlink"),o.editLinkUrl.value=null}}),V(j,{key:"qedt_btm_upd",...o.buttonProps.value,label:o.$q.lang.label.update,noCaps:!0,onClick:e})])]}}const li=Object.prototype.toString,xt=Object.prototype.hasOwnProperty,ri=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(o=>"[object "+o+"]"));function fo(o){if(o!==Object(o)||ri.has(li.call(o))===!0||o.constructor&&xt.call(o,"constructor")===!1&&xt.call(o.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in o);return t===void 0||xt.call(o,t)}function Mo(){let o,t,l,e,a,p,i=arguments[0]||{},m=1,k=!1;const C=arguments.length;for(typeof i=="boolean"&&(k=i,i=arguments[1]||{},m=2),Object(i)!==i&&typeof i!="function"&&(i={}),C===m&&(i=this,m--);m<C;m++)if((o=arguments[m])!==null)for(t in o)l=i[t],e=o[t],i!==e&&(k===!0&&e&&((a=Array.isArray(e))||fo(e)===!0)?(a===!0?p=Array.isArray(l)===!0?l:[]:p=fo(l)===!0?l:{},i[t]=Mo(k,p,e)):e!==void 0&&(i[t]=e));return i}const ai=en({name:"QEditor",props:{...tn,...Rn,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:o=>o.length===0||o.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:o=>["div","p"].includes(o),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...wn,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(o,{slots:t,emit:l}){const{proxy:e}=on(),{$q:a}=e,p=nn(o,a),{inFullscreen:i,toggleFullscreen:m}=Ln(),k=kn(),C=F(null),g=F(null),v=F(null),E=F(!1),_=oe(()=>!o.readonly&&!o.disable);let I,M,L=o.modelValue;document.execCommand("defaultParagraphSeparator",!1,o.paragraphTag),I=window.getComputedStyle(document.body).fontFamily;const W=oe(()=>o.toolbarBg?` bg-${o.toolbarBg}`:""),G=oe(()=>({type:"a",flat:o.toolbarOutline!==!0&&o.toolbarPush!==!0,noWrap:!0,outline:o.toolbarOutline,push:o.toolbarPush,rounded:o.toolbarRounded,dense:!0,color:o.toolbarColor,disable:!_.value,size:"sm"})),S=oe(()=>{const r=a.lang.editor,c=a.iconSet.editor;return{bold:{cmd:"bold",icon:c.bold,tip:r.bold,key:66},italic:{cmd:"italic",icon:c.italic,tip:r.italic,key:73},strike:{cmd:"strikeThrough",icon:c.strikethrough,tip:r.strikethrough,key:83},underline:{cmd:"underline",icon:c.underline,tip:r.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:c.unorderedList,tip:r.unorderedList},ordered:{cmd:"insertOrderedList",icon:c.orderedList,tip:r.orderedList},subscript:{cmd:"subscript",icon:c.subscript,tip:r.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:c.superscript,tip:r.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:x=>x.caret&&!x.caret.can("link"),icon:c.hyperlink,tip:r.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:c.toggleFullscreen,tip:r.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:c.viewSource,tip:r.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:c.quote,tip:r.quote,key:81},left:{cmd:"justifyLeft",icon:c.left,tip:r.left},center:{cmd:"justifyCenter",icon:c.center,tip:r.center},right:{cmd:"justifyRight",icon:c.right,tip:r.right},justify:{cmd:"justifyFull",icon:c.justify,tip:r.justify},print:{type:"no-state",cmd:"print",icon:c.print,tip:r.print,key:80},outdent:{type:"no-state",disable:x=>x.caret&&!x.caret.can("outdent"),cmd:"outdent",icon:c.outdent,tip:r.outdent},indent:{type:"no-state",disable:x=>x.caret&&!x.caret.can("indent"),cmd:"indent",icon:c.indent,tip:r.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:c.removeFormat,tip:r.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:c.hr,tip:r.hr},undo:{type:"no-state",cmd:"undo",icon:c.undo,tip:r.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:c.redo,tip:r.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:c.heading1||c.heading,tip:r.heading1,htmlTip:`<h1 class="q-ma-none">${r.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:c.heading2||c.heading,tip:r.heading2,htmlTip:`<h2 class="q-ma-none">${r.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:c.heading3||c.heading,tip:r.heading3,htmlTip:`<h3 class="q-ma-none">${r.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:c.heading4||c.heading,tip:r.heading4,htmlTip:`<h4 class="q-ma-none">${r.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:c.heading5||c.heading,tip:r.heading5,htmlTip:`<h5 class="q-ma-none">${r.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:c.heading6||c.heading,tip:r.heading6,htmlTip:`<h6 class="q-ma-none">${r.heading6}</h6>`},p:{cmd:"formatBlock",param:o.paragraphTag,icon:c.heading,tip:r.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:c.code,htmlTip:`<code>${r.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:c.size1||c.size,tip:r.size1,htmlTip:`<font size="1">${r.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:c.size2||c.size,tip:r.size2,htmlTip:`<font size="2">${r.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:c.size3||c.size,tip:r.size3,htmlTip:`<font size="3">${r.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:c.size4||c.size,tip:r.size4,htmlTip:`<font size="4">${r.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:c.size5||c.size,tip:r.size5,htmlTip:`<font size="5">${r.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:c.size6||c.size,tip:r.size6,htmlTip:`<font size="6">${r.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:c.size7||c.size,tip:r.size7,htmlTip:`<font size="7">${r.size7}</font>`}}}),Q=oe(()=>{const r=o.definitions||{},c=o.definitions||o.fonts?Mo(!0,{},S.value,r,ni(I,a.lang.editor.defaultFont,a.iconSet.editor.font,o.fonts)):S.value;return o.toolbar.map(x=>x.map(H=>{if(H.options)return{type:"dropdown",icon:H.icon,label:H.label,size:"sm",dense:!0,fixedLabel:H.fixedLabel,fixedIcon:H.fixedIcon,highlight:H.highlight,list:H.list,options:H.options.map(be=>c[be])};const ce=c[H];return ce?ce.type==="no-state"||r[H]&&(ce.cmd===void 0||S.value[ce.cmd]&&S.value[ce.cmd].type==="no-state")?ce:Object.assign({type:"toggle"},ce):{type:"slot",slot:H}}))}),A={$q:a,props:o,slots:t,emit:l,inFullscreen:i,toggleFullscreen:m,runCmd:U,isViewingSource:E,editLinkUrl:v,toolbarBackgroundClass:W,buttonProps:G,contentRef:g,buttons:Q,setContent:Le};ke(()=>o.modelValue,r=>{L!==r&&(L=r,Le(r,!0))}),ke(v,r=>{l(`link${r?"Show":"Hide"}`)});const K=oe(()=>o.toolbar&&o.toolbar.length!==0),pe=oe(()=>{const r={},c=x=>{x.key&&(r[x.key]={cmd:x.cmd,param:x.param})};return Q.value.forEach(x=>{x.forEach(H=>{H.options?H.options.forEach(c):c(H)})}),r}),Fe=oe(()=>i.value?o.contentStyle:[{minHeight:o.minHeight,height:o.height,maxHeight:o.maxHeight},o.contentStyle]),we=oe(()=>`q-editor q-editor--${E.value===!0?"source":"default"}`+(o.disable===!0?" disabled":"")+(i.value===!0?" fullscreen column":"")+(o.square===!0?" q-editor--square no-border-radius":"")+(o.flat===!0?" q-editor--flat":"")+(o.dense===!0?" q-editor--dense":"")+(p.value===!0?" q-editor--dark q-dark":"")),z=oe(()=>[o.contentClass,"q-editor__content",{col:i.value,"overflow-auto":i.value||o.maxHeight}]),Y=oe(()=>o.disable===!0?{"aria-disabled":"true"}:{});function le(){if(g.value!==null){const r=`inner${E.value===!0?"Text":"HTML"}`,c=g.value[r];c!==o.modelValue&&(L=c,l("update:modelValue",c))}}function se(r){if(l("keydown",r),r.ctrlKey!==!0||Eo(r)===!0){ue();return}const c=r.keyCode,x=pe.value[c];if(x!==void 0){const{cmd:H,param:ce}=x;rn(r),U(H,ce,!1)}}function Te(r){ue(),l("click",r)}function pt(r){if(g.value!==null){const{scrollTop:c,scrollHeight:x}=g.value;M=x-c}A.caret.save(),l("blur",r)}function gt(r){an(()=>{g.value!==null&&M!==void 0&&(g.value.scrollTop=g.value.scrollHeight-M)}),l("focus",r)}function Ke(r){const c=C.value;if(c!==null&&c.contains(r.target)===!0&&(r.relatedTarget===null||c.contains(r.relatedTarget)!==!0)){const x=`inner${E.value===!0?"Text":"HTML"}`;A.caret.restorePosition(g.value[x].length),ue()}}function ht(r){const c=C.value;c!==null&&c.contains(r.target)===!0&&(r.relatedTarget===null||c.contains(r.relatedTarget)!==!0)&&(A.caret.savePosition(),ue())}function Ve(){M=void 0}function B(r){A.caret.save()}function Le(r,c){if(g.value!==null){c===!0&&A.caret.savePosition();const x=`inner${E.value===!0?"Text":"HTML"}`;g.value[x]=r,c===!0&&(A.caret.restorePosition(g.value[x].length),ue())}}function U(r,c,x=!0){P(),A.caret.restore(),A.caret.apply(r,c,()=>{P(),A.caret.save(),x&&ue()})}function ue(){setTimeout(()=>{v.value=null,e.$forceUpdate()},1)}function P(){sn(()=>{g.value!==null&&g.value.focus({preventScroll:!0})})}function Ee(){return g.value}return Oe(()=>{A.caret=e.caret=new ei(g.value,A),Le(o.modelValue),ue(),document.addEventListener("selectionchange",B)}),ln(()=>{document.removeEventListener("selectionchange",B)}),Object.assign(e,{runCmd:U,refreshToolbar:ue,focus:P,getContentEl:Ee}),()=>{let r;if(K.value){const c=[V("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+W.value},oi(A))];v.value!==null&&c.push(V("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+W.value},ii(A))),r=V("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},c)}return V("div",{ref:C,class:we.value,style:{height:i.value===!0?"100%":null},...Y.value,onFocusin:Ke,onFocusout:ht},[r,V("div",{ref:g,style:Fe.value,class:z.value,contenteditable:_.value,placeholder:o.placeholder,...k.listeners.value,onInput:le,onKeydown:se,onClick:Te,onBlur:pt,onFocus:gt,onMousedown:Ve,onTouchstartPassive:Ve})])}}});/*! @license DOMPurify 3.1.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.5/LICENSE */const{entries:Do,setPrototypeOf:po,isFrozen:si,getPrototypeOf:ci,getOwnPropertyDescriptor:di}=Object;let{freeze:ne,seal:de,create:Io}=Object,{apply:Pt,construct:zt}=typeof Reflect<"u"&&Reflect;ne||(ne=function(t){return t});de||(de=function(t){return t});Pt||(Pt=function(t,l,e){return t.apply(l,e)});zt||(zt=function(t,l){return new t(...l)});const nt=ae(Array.prototype.forEach),go=ae(Array.prototype.pop),We=ae(Array.prototype.push),rt=ae(String.prototype.toLowerCase),Ot=ae(String.prototype.toString),ho=ae(String.prototype.match),je=ae(String.prototype.replace),ui=ae(String.prototype.indexOf),mi=ae(String.prototype.trim),me=ae(Object.prototype.hasOwnProperty),te=ae(RegExp.prototype.test),Ge=fi(TypeError);function ae(o){return function(t){for(var l=arguments.length,e=new Array(l>1?l-1:0),a=1;a<l;a++)e[a-1]=arguments[a];return Pt(o,t,e)}}function fi(o){return function(){for(var t=arguments.length,l=new Array(t),e=0;e<t;e++)l[e]=arguments[e];return zt(o,l)}}function T(o,t){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt;po&&po(o,null);let e=t.length;for(;e--;){let a=t[e];if(typeof a=="string"){const p=l(a);p!==a&&(si(t)||(t[e]=p),a=p)}o[a]=!0}return o}function pi(o){for(let t=0;t<o.length;t++)me(o,t)||(o[t]=null);return o}function Se(o){const t=Io(null);for(const[l,e]of Do(o))me(o,l)&&(Array.isArray(e)?t[l]=pi(e):e&&typeof e=="object"&&e.constructor===Object?t[l]=Se(e):t[l]=e);return t}function it(o,t){for(;o!==null;){const e=di(o,t);if(e){if(e.get)return ae(e.get);if(typeof e.value=="function")return ae(e.value)}o=ci(o)}function l(){return null}return l}const yo=ne(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rt=ne(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wt=ne(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gi=ne(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lt=ne(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hi=ne(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_o=ne(["#text"]),vo=ne(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mt=ne(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),To=ne(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lt=ne(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yi=de(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_i=de(/<%[\w\W]*|[\w\W]*%>/gm),vi=de(/\${[\w\W]*}/gm),Ti=de(/^data-[\-\w.\u00B7-\uFFFF]/),bi=de(/^aria-[\-\w]+$/),No=de(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ei=de(/^(?:\w+script|data):/i),Ci=de(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Po=de(/^html$/i),Si=de(/^[a-z][.\w]*(-[.\w]+)+$/i);var bo=Object.freeze({__proto__:null,MUSTACHE_EXPR:yi,ERB_EXPR:_i,TMPLIT_EXPR:vi,DATA_ATTR:Ti,ARIA_ATTR:bi,IS_ALLOWED_URI:No,IS_SCRIPT_OR_DATA:Ei,ATTR_WHITESPACE:Ci,DOCTYPE_NAME:Po,CUSTOM_ELEMENT:Si});const Qe={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Ai=function(){return typeof window>"u"?null:window},ki=function(t,l){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let e=null;const a="data-tt-policy-suffix";l&&l.hasAttribute(a)&&(e=l.getAttribute(a));const p="dompurify"+(e?"#"+e:"");try{return t.createPolicy(p,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+p+" could not be created."),null}};function zo(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ai();const t=h=>zo(h);if(t.version="3.1.5",t.removed=[],!o||!o.document||o.document.nodeType!==Qe.document)return t.isSupported=!1,t;let{document:l}=o;const e=l,a=e.currentScript,{DocumentFragment:p,HTMLTemplateElement:i,Node:m,Element:k,NodeFilter:C,NamedNodeMap:g=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:v,DOMParser:E,trustedTypes:_}=o,I=k.prototype,M=it(I,"cloneNode"),L=it(I,"nextSibling"),W=it(I,"childNodes"),G=it(I,"parentNode");if(typeof i=="function"){const h=l.createElement("template");h.content&&h.content.ownerDocument&&(l=h.content.ownerDocument)}let S,Q="";const{implementation:A,createNodeIterator:K,createDocumentFragment:pe,getElementsByTagName:Fe}=l,{importNode:we}=e;let z={};t.isSupported=typeof Do=="function"&&typeof G=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:le,TMPLIT_EXPR:se,DATA_ATTR:Te,ARIA_ATTR:pt,IS_SCRIPT_OR_DATA:gt,ATTR_WHITESPACE:Ke,CUSTOM_ELEMENT:ht}=bo;let{IS_ALLOWED_URI:Ve}=bo,B=null;const Le=T({},[...yo,...Rt,...wt,...Lt,..._o]);let U=null;const ue=T({},[...vo,...Mt,...To,...lt]);let P=Object.seal(Io(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,r=null,c=!0,x=!0,H=!1,ce=!0,be=!1,yt=!0,Ce=!1,_t=!1,vt=!1,Me=!1,Ze=!1,Je=!1,qt=!0,Ht=!1;const Uo="user-content-";let Tt=!0,Be=!1,De={},Ie=null;const Wt=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jt=null;const Gt=T({},["audio","video","img","source","image","track"]);let bt=null;const Qt=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$e="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let Ne=_e,Et=!1,Ct=null;const Fo=T({},[$e,et,_e],Ot);let qe=null;const Vo=["application/xhtml+xml","text/html"],Bo="text/html";let X=null,Pe=null;const qo=l.createElement("form"),Yt=function(n){return n instanceof RegExp||n instanceof Function},St=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pe&&Pe===n)){if((!n||typeof n!="object")&&(n={}),n=Se(n),qe=Vo.indexOf(n.PARSER_MEDIA_TYPE)===-1?Bo:n.PARSER_MEDIA_TYPE,X=qe==="application/xhtml+xml"?Ot:rt,B=me(n,"ALLOWED_TAGS")?T({},n.ALLOWED_TAGS,X):Le,U=me(n,"ALLOWED_ATTR")?T({},n.ALLOWED_ATTR,X):ue,Ct=me(n,"ALLOWED_NAMESPACES")?T({},n.ALLOWED_NAMESPACES,Ot):Fo,bt=me(n,"ADD_URI_SAFE_ATTR")?T(Se(Qt),n.ADD_URI_SAFE_ATTR,X):Qt,jt=me(n,"ADD_DATA_URI_TAGS")?T(Se(Gt),n.ADD_DATA_URI_TAGS,X):Gt,Ie=me(n,"FORBID_CONTENTS")?T({},n.FORBID_CONTENTS,X):Wt,Ee=me(n,"FORBID_TAGS")?T({},n.FORBID_TAGS,X):{},r=me(n,"FORBID_ATTR")?T({},n.FORBID_ATTR,X):{},De=me(n,"USE_PROFILES")?n.USE_PROFILES:!1,c=n.ALLOW_ARIA_ATTR!==!1,x=n.ALLOW_DATA_ATTR!==!1,H=n.ALLOW_UNKNOWN_PROTOCOLS||!1,ce=n.ALLOW_SELF_CLOSE_IN_ATTR!==!1,be=n.SAFE_FOR_TEMPLATES||!1,yt=n.SAFE_FOR_XML!==!1,Ce=n.WHOLE_DOCUMENT||!1,Me=n.RETURN_DOM||!1,Ze=n.RETURN_DOM_FRAGMENT||!1,Je=n.RETURN_TRUSTED_TYPE||!1,vt=n.FORCE_BODY||!1,qt=n.SANITIZE_DOM!==!1,Ht=n.SANITIZE_NAMED_PROPS||!1,Tt=n.KEEP_CONTENT!==!1,Be=n.IN_PLACE||!1,Ve=n.ALLOWED_URI_REGEXP||No,Ne=n.NAMESPACE||_e,P=n.CUSTOM_ELEMENT_HANDLING||{},n.CUSTOM_ELEMENT_HANDLING&&Yt(n.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(P.tagNameCheck=n.CUSTOM_ELEMENT_HANDLING.tagNameCheck),n.CUSTOM_ELEMENT_HANDLING&&Yt(n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(P.attributeNameCheck=n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),n.CUSTOM_ELEMENT_HANDLING&&typeof n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(P.allowCustomizedBuiltInElements=n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),be&&(x=!1),Ze&&(Me=!0),De&&(B=T({},_o),U=[],De.html===!0&&(T(B,yo),T(U,vo)),De.svg===!0&&(T(B,Rt),T(U,Mt),T(U,lt)),De.svgFilters===!0&&(T(B,wt),T(U,Mt),T(U,lt)),De.mathMl===!0&&(T(B,Lt),T(U,To),T(U,lt))),n.ADD_TAGS&&(B===Le&&(B=Se(B)),T(B,n.ADD_TAGS,X)),n.ADD_ATTR&&(U===ue&&(U=Se(U)),T(U,n.ADD_ATTR,X)),n.ADD_URI_SAFE_ATTR&&T(bt,n.ADD_URI_SAFE_ATTR,X),n.FORBID_CONTENTS&&(Ie===Wt&&(Ie=Se(Ie)),T(Ie,n.FORBID_CONTENTS,X)),Tt&&(B["#text"]=!0),Ce&&T(B,["html","head","body"]),B.table&&(T(B,["tbody"]),delete Ee.tbody),n.TRUSTED_TYPES_POLICY){if(typeof n.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ge('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof n.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ge('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=n.TRUSTED_TYPES_POLICY,Q=S.createHTML("")}else S===void 0&&(S=ki(_,a)),S!==null&&typeof Q=="string"&&(Q=S.createHTML(""));ne&&ne(n),Pe=n}},Xt=T({},["mi","mo","mn","ms","mtext"]),Kt=T({},["foreignobject","annotation-xml"]),Ho=T({},["title","style","font","a","script"]),Zt=T({},[...Rt,...wt,...gi]),Jt=T({},[...Lt,...hi]),Wo=function(n){let s=G(n);(!s||!s.tagName)&&(s={namespaceURI:Ne,tagName:"template"});const f=rt(n.tagName),N=rt(s.tagName);return Ct[n.namespaceURI]?n.namespaceURI===et?s.namespaceURI===_e?f==="svg":s.namespaceURI===$e?f==="svg"&&(N==="annotation-xml"||Xt[N]):!!Zt[f]:n.namespaceURI===$e?s.namespaceURI===_e?f==="math":s.namespaceURI===et?f==="math"&&Kt[N]:!!Jt[f]:n.namespaceURI===_e?s.namespaceURI===et&&!Kt[N]||s.namespaceURI===$e&&!Xt[N]?!1:!Jt[f]&&(Ho[f]||!Zt[f]):!!(qe==="application/xhtml+xml"&&Ct[n.namespaceURI]):!1},ge=function(n){We(t.removed,{element:n});try{n.parentNode.removeChild(n)}catch{n.remove()}},tt=function(n,s){try{We(t.removed,{attribute:s.getAttributeNode(n),from:s})}catch{We(t.removed,{attribute:null,from:s})}if(s.removeAttribute(n),n==="is"&&!U[n])if(Me||Ze)try{ge(s)}catch{}else try{s.setAttribute(n,"")}catch{}},$t=function(n){let s=null,f=null;if(vt)n="<remove></remove>"+n;else{const Z=ho(n,/^[\r\n\t ]+/);f=Z&&Z[0]}qe==="application/xhtml+xml"&&Ne===_e&&(n='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+n+"</body></html>");const N=S?S.createHTML(n):n;if(Ne===_e)try{s=new E().parseFromString(N,qe)}catch{}if(!s||!s.documentElement){s=A.createDocument(Ne,"template",null);try{s.documentElement.innerHTML=Et?Q:N}catch{}}const J=s.body||s.documentElement;return n&&f&&J.insertBefore(l.createTextNode(f),J.childNodes[0]||null),Ne===_e?Fe.call(s,Ce?"html":"body")[0]:Ce?s.documentElement:J},eo=function(n){return K.call(n.ownerDocument||n,n,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT|C.SHOW_PROCESSING_INSTRUCTION|C.SHOW_CDATA_SECTION,null)},to=function(n){return n instanceof v&&(typeof n.nodeName!="string"||typeof n.textContent!="string"||typeof n.removeChild!="function"||!(n.attributes instanceof g)||typeof n.removeAttribute!="function"||typeof n.setAttribute!="function"||typeof n.namespaceURI!="string"||typeof n.insertBefore!="function"||typeof n.hasChildNodes!="function")},oo=function(n){return typeof m=="function"&&n instanceof m},ve=function(n,s,f){z[n]&&nt(z[n],N=>{N.call(t,s,f,Pe)})},no=function(n){let s=null;if(ve("beforeSanitizeElements",n,null),to(n))return ge(n),!0;const f=X(n.nodeName);if(ve("uponSanitizeElement",n,{tagName:f,allowedTags:B}),n.hasChildNodes()&&!oo(n.firstElementChild)&&te(/<[/\w]/g,n.innerHTML)&&te(/<[/\w]/g,n.textContent)||n.nodeType===Qe.progressingInstruction||yt&&n.nodeType===Qe.comment&&te(/<[/\w]/g,n.data))return ge(n),!0;if(!B[f]||Ee[f]){if(!Ee[f]&&lo(f)&&(P.tagNameCheck instanceof RegExp&&te(P.tagNameCheck,f)||P.tagNameCheck instanceof Function&&P.tagNameCheck(f)))return!1;if(Tt&&!Ie[f]){const N=G(n)||n.parentNode,J=W(n)||n.childNodes;if(J&&N){const Z=J.length;for(let ie=Z-1;ie>=0;--ie){const he=M(J[ie],!0);he.__removalCount=(n.__removalCount||0)+1,N.insertBefore(he,L(n))}}}return ge(n),!0}return n instanceof k&&!Wo(n)||(f==="noscript"||f==="noembed"||f==="noframes")&&te(/<\/no(script|embed|frames)/i,n.innerHTML)?(ge(n),!0):(be&&n.nodeType===Qe.text&&(s=n.textContent,nt([Y,le,se],N=>{s=je(s,N," ")}),n.textContent!==s&&(We(t.removed,{element:n.cloneNode()}),n.textContent=s)),ve("afterSanitizeElements",n,null),!1)},io=function(n,s,f){if(qt&&(s==="id"||s==="name")&&(f in l||f in qo))return!1;if(!(x&&!r[s]&&te(Te,s))){if(!(c&&te(pt,s))){if(!U[s]||r[s]){if(!(lo(n)&&(P.tagNameCheck instanceof RegExp&&te(P.tagNameCheck,n)||P.tagNameCheck instanceof Function&&P.tagNameCheck(n))&&(P.attributeNameCheck instanceof RegExp&&te(P.attributeNameCheck,s)||P.attributeNameCheck instanceof Function&&P.attributeNameCheck(s))||s==="is"&&P.allowCustomizedBuiltInElements&&(P.tagNameCheck instanceof RegExp&&te(P.tagNameCheck,f)||P.tagNameCheck instanceof Function&&P.tagNameCheck(f))))return!1}else if(!bt[s]){if(!te(Ve,je(f,Ke,""))){if(!((s==="src"||s==="xlink:href"||s==="href")&&n!=="script"&&ui(f,"data:")===0&&jt[n])){if(!(H&&!te(gt,je(f,Ke,"")))){if(f)return!1}}}}}}return!0},lo=function(n){return n!=="annotation-xml"&&ho(n,ht)},ro=function(n){ve("beforeSanitizeAttributes",n,null);const{attributes:s}=n;if(!s)return;const f={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};let N=s.length;for(;N--;){const J=s[N],{name:Z,namespaceURI:ie,value:he}=J,He=X(Z);let ee=Z==="value"?he:mi(he);if(f.attrName=He,f.attrValue=ee,f.keepAttr=!0,f.forceKeepAttr=void 0,ve("uponSanitizeAttribute",n,f),ee=f.attrValue,f.forceKeepAttr||(tt(Z,n),!f.keepAttr))continue;if(!ce&&te(/\/>/i,ee)){tt(Z,n);continue}if(yt&&te(/((--!?|])>)|<\/(style|title)/i,ee)){tt(Z,n);continue}be&&nt([Y,le,se],so=>{ee=je(ee,so," ")});const ao=X(n.nodeName);if(io(ao,He,ee)){if(Ht&&(He==="id"||He==="name")&&(tt(Z,n),ee=Uo+ee),S&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!ie)switch(_.getAttributeType(ao,He)){case"TrustedHTML":{ee=S.createHTML(ee);break}case"TrustedScriptURL":{ee=S.createScriptURL(ee);break}}try{ie?n.setAttributeNS(ie,Z,ee):n.setAttribute(Z,ee),to(n)?ge(n):go(t.removed)}catch{}}}ve("afterSanitizeAttributes",n,null)},jo=function h(n){let s=null;const f=eo(n);for(ve("beforeSanitizeShadowDOM",n,null);s=f.nextNode();)ve("uponSanitizeShadowNode",s,null),!no(s)&&(s.content instanceof p&&h(s.content),ro(s));ve("afterSanitizeShadowDOM",n,null)};return t.sanitize=function(h){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=null,f=null,N=null,J=null;if(Et=!h,Et&&(h="<!-->"),typeof h!="string"&&!oo(h))if(typeof h.toString=="function"){if(h=h.toString(),typeof h!="string")throw Ge("dirty is not a string, aborting")}else throw Ge("toString is not a function");if(!t.isSupported)return h;if(_t||St(n),t.removed=[],typeof h=="string"&&(Be=!1),Be){if(h.nodeName){const he=X(h.nodeName);if(!B[he]||Ee[he])throw Ge("root node is forbidden and cannot be sanitized in-place")}}else if(h instanceof m)s=$t("<!---->"),f=s.ownerDocument.importNode(h,!0),f.nodeType===Qe.element&&f.nodeName==="BODY"||f.nodeName==="HTML"?s=f:s.appendChild(f);else{if(!Me&&!be&&!Ce&&h.indexOf("<")===-1)return S&&Je?S.createHTML(h):h;if(s=$t(h),!s)return Me?null:Je?Q:""}s&&vt&&ge(s.firstChild);const Z=eo(Be?h:s);for(;N=Z.nextNode();)no(N)||(N.content instanceof p&&jo(N.content),ro(N));if(Be)return h;if(Me){if(Ze)for(J=pe.call(s.ownerDocument);s.firstChild;)J.appendChild(s.firstChild);else J=s;return(U.shadowroot||U.shadowrootmode)&&(J=we.call(e,J,!0)),J}let ie=Ce?s.outerHTML:s.innerHTML;return Ce&&B["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&te(Po,s.ownerDocument.doctype.name)&&(ie="<!DOCTYPE "+s.ownerDocument.doctype.name+`>
`+ie),be&&nt([Y,le,se],he=>{ie=je(ie,he," ")}),S&&Je?S.createHTML(ie):ie},t.setConfig=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};St(h),_t=!0},t.clearConfig=function(){Pe=null,_t=!1},t.isValidAttribute=function(h,n,s){Pe||St({});const f=X(h),N=X(n);return io(f,N,s)},t.addHook=function(h,n){typeof n=="function"&&(z[h]=z[h]||[],We(z[h],n))},t.removeHook=function(h){if(z[h])return go(z[h])},t.removeHooks=function(h){z[h]&&(z[h]=[])},t.removeAllHooks=function(){z={}},t}var xi=zo();const Oi=xe({__name:"editableInstruction",props:fe({createMode:{type:Boolean},rules:{},editTransform:{}},{modelValue:{required:!1,default:""},modelModifiers:{}}),emits:fe(["onChange"],["update:modelValue"]),setup(o,{expose:t,emit:l}){const e=Ue(o,"modelValue"),a=o,p=l,{cancel:i,enableEditMode:m,isEditMode:k,editedValue:C,submit:g,mountEditableService:v,isLoading:E}=ft(a,p,e);t({submit:g});const _=oe(()=>e?.value?xi.sanitize(e.value):""),I=oe(()=>_.value?"change":"recipeDetail.createInstruction"),M=[["bold","italic","strike","underline"],["unordered","ordered","subscript","superscript"],["link","fullscreen","viewsource"],["quote","left","center","right","justify"],["print","outdent","indent","removeFormat","hr"],["undo","redo","p","code"]];Oe(()=>v());const L={model:e,props:a,emit:p,cancel:i,enableEditMode:m,isEditMode:k,editedValue:C,submit:g,mountEditableService:v,isLoading:E,purifiedInstruction:_,instructionBtnText:I,toolbar:M,get ionCloseOutline(){return Xe},get ionCheckmarkOutline(){return ut},get ionColorWandOutline(){return Ft}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Ri={autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},wi=["innerHTML"];function Li(o,t,l,e,a,p){return y(),w(ze,null,{default:u(()=>[d(q,{class:"text-capitalize text-h6"},{default:u(()=>[R(b(o.$t("recipeDetail.instruction")),1)]),_:1}),e.isEditMode?(y(),w(q,{key:0},{default:u(()=>[D("form",Ri,[d(ai,{modelValue:e.editedValue,"onUpdate:modelValue":t[0]||(t[0]=i=>e.editedValue=i),toolbar:e.toolbar},null,8,["modelValue"])])]),_:1})):O("",!0),e.isEditMode?O("",!0):(y(),w(q,{key:1},{default:u(()=>[D("div",{innerHTML:e.purifiedInstruction},null,8,wi)]),_:1})),e.props.createMode?O("",!0):(y(),w(ct,{key:2},{default:u(()=>[d(st),e.isEditMode?O("",!0):(y(),w(j,{key:0,icon:e.ionColorWandOutline,onClick:t[1]||(t[1]=i=>e.enableEditMode()),color:"primary"},{default:u(()=>[R(b(o.$t(e.instructionBtnText)),1)]),_:1},8,["icon"])),e.isEditMode?(y(),w(j,{key:1,loading:e.isLoading,type:"submit",icon:e.ionCheckmarkOutline,onClick:t[2]||(t[2]=i=>e.submit()),color:"primary"},{default:u(()=>[R(b(o.$t("save")),1)]),_:1},8,["loading","icon"])):O("",!0),e.isEditMode?(y(),w(j,{key:2,disable:e.isLoading,icon:e.ionCloseOutline,onClick:t[3]||(t[3]=i=>e.cancel())},{default:u(()=>[R(b(o.$t("cancel")),1)]),_:1},8,["disable","icon"])):O("",!0)]),_:1}))]),_:1})}const Mi=Re(Oi,[["render",Li],["__file","editableInstruction.vue"]]),Di=xe({__name:"recipeDetailCalories",props:fe({createMode:{type:Boolean},rules:{},editTransform:{}},{modelValue:{required:!1,default:{}},modelModifiers:{}}),emits:fe(["onChange"],["update:modelValue"]),setup(o,{expose:t,emit:l}){const e=o,a=Ue(o,"modelValue"),p=l,{capitalize:i}=Vt,{integer:m,minValue:k}=mt(),{cancel:C,enableEditMode:g,isEditMode:v,editedValue:E,submit:_,isLoading:I,mountEditableService:M}=ft(e,p,a);t({submit:_}),Oe(()=>M());const L={props:e,model:a,emit:p,capitalize:i,integer:m,minValue:k,cancel:C,enableEditMode:g,isEditMode:v,editedValue:E,submit:_,isLoading:I,mountEditableService:M,get ionColorWandOutline(){return Ft},get ionCloseOutline(){return Xe},get ionCheckmarkOutline(){return ut},get biFire(){return Mn},get biEggFried(){return Dn},get biDropletHalf(){return In},get biBoxes(){return Nn}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Ii={key:0,class:"col-5 text-h6 flex"},Ni={key:0,class:"col-5 text-h6"},Pi={key:0,class:"col-5 text-h6"},zi={key:0,class:"col-5 text-h6"};function Ui(o,t,l,e,a,p){return y(),w(ze,null,{default:u(()=>[d(q,null,{default:u(()=>[d(q,{class:"row q-px-none"},{default:u(()=>[d(q,{horizontal:"",class:"col-6"},{default:u(()=>[d(ye,{name:e.biFire,size:"md",color:"secondary",left:""},null,8,["name"]),e.isEditMode?O("",!0):(y(),$("div",Ii,b(e.model.calories?`${e.model.calories} ${o.$t("recipeDetail.calories.kcal")}`:"-"),1)),e.isEditMode?(y(),w(Ye,{key:1,dense:"","no-error-icon":"",class:"q-mr-md",rules:[e.integer,e.minValue(0)],hint:e.capitalize(o.$t("recipeDetail.calories.calories")),type:"text",inputmode:"numeric",suffix:o.$t("recipeDetail.calories.kcal"),modelValue:e.editedValue.calories,"onUpdate:modelValue":t[0]||(t[0]=i=>e.editedValue.calories=i)},null,8,["rules","hint","suffix","modelValue"])):O("",!0),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipeDetail.calories.calories")),1)]),_:1})]),_:1}),d(q,{horizontal:"",class:"col-6"},{default:u(()=>[d(ye,{name:e.biEggFried,size:"md",color:"secondary",left:""},null,8,["name"]),e.isEditMode?O("",!0):(y(),$("div",Ni,b(e.model.proteins?`${e.model.proteins} ${o.$t("recipeDetail.calories.g")}`:"-"),1)),e.isEditMode?(y(),w(Ye,{key:1,dense:"","no-error-icon":"",class:"q-mr-md",rules:[e.integer,e.minValue(0)],hint:e.capitalize(o.$t("recipeDetail.calories.proteins")),type:"text",inputmode:"numeric",suffix:o.$t("recipeDetail.calories.g"),modelValue:e.editedValue.proteins,"onUpdate:modelValue":t[1]||(t[1]=i=>e.editedValue.proteins=i)},null,8,["rules","hint","suffix","modelValue"])):O("",!0),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipeDetail.calories.proteins")),1)]),_:1})]),_:1})]),_:1}),d(q,{class:"row q-px-none"},{default:u(()=>[d(q,{horizontal:"",class:"col-6"},{default:u(()=>[d(ye,{name:e.biDropletHalf,size:"md",color:"secondary",left:""},null,8,["name"]),e.isEditMode?O("",!0):(y(),$("div",Pi,b(e.model.fats?`${e.model.fats} ${o.$t("recipeDetail.calories.g")}`:"-"),1)),e.isEditMode?(y(),w(Ye,{key:1,dense:"","no-error-icon":"",class:"q-mr-md",rules:[e.integer,e.minValue(0)],hint:e.capitalize(o.$t("recipeDetail.calories.fats")),type:"text",inputmode:"numeric",suffix:o.$t("recipeDetail.calories.g"),modelValue:e.editedValue.fats,"onUpdate:modelValue":t[2]||(t[2]=i=>e.editedValue.fats=i)},null,8,["rules","hint","suffix","modelValue"])):O("",!0),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipeDetail.calories.fats")),1)]),_:1})]),_:1}),d(q,{horizontal:"",class:"col-6"},{default:u(()=>[d(ye,{name:e.biBoxes,size:"md",color:"secondary",left:""},null,8,["name"]),e.isEditMode?O("",!0):(y(),$("div",zi,b(e.model.carbohydrates?`${e.model.carbohydrates} ${o.$t("recipeDetail.calories.g")}`:"-"),1)),e.isEditMode?(y(),w(Ye,{key:1,dense:"","no-error-icon":"",class:"q-mr-md",rules:[e.integer,e.minValue(0)],hint:e.capitalize(o.$t("recipeDetail.calories.carbohydrates")),type:"text",inputmode:"numeric",suffix:o.$t("recipeDetail.calories.g"),modelValue:e.editedValue.carbohydrates,"onUpdate:modelValue":t[3]||(t[3]=i=>e.editedValue.carbohydrates=i)},null,8,["rules","hint","suffix","modelValue"])):O("",!0),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipeDetail.calories.carbohydrates")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e.props.createMode?O("",!0):(y(),w(ct,{key:0,align:"right"},{default:u(()=>[e.isEditMode?O("",!0):(y(),w(j,{key:0,icon:e.ionColorWandOutline,onClick:e.enableEditMode,color:"primary"},{default:u(()=>[R(b(o.$t("change")),1)]),_:1},8,["icon","onClick"])),e.isEditMode?(y(),$(Ae,{key:1},[d(j,{loading:e.isLoading,onClick:e.submit,icon:e.ionCheckmarkOutline,color:"primary"},{default:u(()=>[R(b(o.$t("save")),1)]),_:1},8,["loading","onClick","icon"]),d(j,{icon:e.ionCloseOutline,onClick:e.cancel},{default:u(()=>[R(b(o.$t("cancel")),1)]),_:1},8,["icon","onClick"])],64)):O("",!0)]),_:1}))]),_:1})}const Fi=Re(Di,[["render",Ui],["__file","recipeDetailCalories.vue"]]),Vi=xe({__name:"editableAutocomplete",props:fe({class:{default:""},placeholder:{default:"-"},multiple:{type:Boolean,default:!1},allowCustomInput:{type:Boolean,default:!1},hint:{default:void 0},getList:{},createMode:{type:Boolean,default:!1},rules:{default:void 0},editTransform:{}},{modelValue:{required:!1,default:null},modelModifiers:{}}),emits:fe(["onChange"],["update:modelValue"]),setup(o,{expose:t,emit:l}){const e=Ue(o,"modelValue"),a=o,p=l,{capitalize:i}=Vt,{t:m}=dt({useScope:"global"}),{cancel:k,enableEditMode:C,isEditMode:g,editedValue:v,submit:E,mountEditableService:_,isLoading:I}=ft(a,p,e);t({submit:E}),Oe(()=>_());const M=oe(()=>`${a.class} q-pa-sm ellipsis`),L=oe(()=>`${a.class} q-px-sm ellipsis`),W=F([]);function G(A){v.value=A}const Q={model:e,props:a,emit:p,capitalize:i,t:m,cancel:k,enableEditMode:C,isEditMode:g,editedValue:v,submit:E,mountEditableService:_,isLoading:I,textClasses:M,inputClasses:L,options:W,setModel:G,filterValue:(A,K)=>{a.getList({search:A}).then(pe=>{K(()=>{W.value=pe})})},get ionCloseOutline(){return Xe},get ionCheckmarkOutline(){return ut},SearchAutocomplete:zn};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),Bi=D("span",{class:"q-focus-helper",tabindex:"-1"},null,-1);function qi(o,t,l,e,a,p){return y(),$(Ae,null,[e.isEditMode?O("",!0):cn((y(),w(ze,{key:0,flat:"",class:"cursor-pointer q-hoverable",onClick:t[0]||(t[0]=i=>e.enableEditMode())},{default:u(()=>[Bi,Array.isArray(e.model)?(y(),w(q,{key:0,class:uo(e.textClasses)},{default:u(()=>[(y(!0),$(Ae,null,Dt(e.model,i=>(y(),w(At,{outline:"",color:"secondary",key:i?.value??i},{default:u(()=>[R(b(i?.label??i),1)]),_:2},1024))),128)),e.model?.length?O("",!0):(y(),$(Ae,{key:0},[R(b(l.placeholder),1)],64))]),_:1},8,["class"])):O("",!0),Array.isArray(e.model)?O("",!0):(y(),w(q,{key:1,class:uo(e.textClasses)},{default:u(()=>[R(b(e.model||l.placeholder),1)]),_:1},8,["class"])),d(re,{anchor:"top middle",offset:[14,30],delay:150},{default:u(()=>[R(b(o.$t("editTooltip")),1)]),_:1})]),_:1})),[[dn]]),e.isEditMode?(y(),w(ko,{key:1,onSubmit:t[7]||(t[7]=ot(i=>e.submit(),["prevent"])),onKeyup:[t[8]||(t[8]=It(i=>e.cancel(),["esc"])),t[9]||(t[9]=It(ot(i=>e.submit(),["prevent"]),["enter"]))]},{default:u(()=>[e.props.allowCustomInput?(y(),w(Nt,{key:0,dense:"","use-input":"","fill-input":"","no-error-icon":"","hide-dropdown-icon":"","hide-selected":"","input-debounce":"300",multiple:e.props.multiple,rules:e.props.rules,"input-class":e.inputClasses,hint:e.props.hint?e.capitalize(e.t(e.props.hint)):void 0,loading:e.isLoading,modelValue:e.editedValue,"onUpdate:modelValue":t[3]||(t[3]=i=>e.editedValue=i),options:e.options,onFilter:e.filterValue,onInputValue:e.setModel},mo({_:2},[e.props.createMode?void 0:{name:"append",fn:u(()=>[d(j,{flat:"",round:"",type:"submit",icon:e.ionCheckmarkOutline,onClick:t[1]||(t[1]=ot(i=>e.submit(),["prevent"])),color:"primary"},null,8,["icon"]),d(j,{flat:"",round:"",icon:e.ionCloseOutline,onClick:t[2]||(t[2]=i=>e.cancel())},null,8,["icon"])]),key:"0"},e.props.multiple?{name:"selected-item",fn:u(i=>[d(At,{class:"ellipsis",removable:"",dense:"",color:"secondary",onRemove:m=>i.removeAtIndex(i.index),tabindex:i.tabindex},{default:u(()=>[R(b(i.opt?.label??i.opt),1)]),_:2},1032,["onRemove","tabindex"])]),key:"1"}:void 0]),1032,["multiple","rules","input-class","hint","loading","modelValue","options"])):O("",!0),e.props.allowCustomInput?O("",!0):(y(),w(e.SearchAutocomplete,{key:1,multiple:e.props.multiple,"get-list":e.props.getList,rules:e.props.rules,hint:e.props.hint?e.capitalize(e.t(e.props.hint)):void 0,modelValue:e.editedValue,"onUpdate:modelValue":t[6]||(t[6]=i=>e.editedValue=i),"hide-dropdown-icon":"",class:"full-width",filled:!1,dense:""},mo({_:2},[e.props.createMode?void 0:{name:"append",fn:u(()=>[d(j,{flat:"",round:"",type:"submit",icon:e.ionCheckmarkOutline,onClick:t[4]||(t[4]=ot(i=>e.submit(),["prevent"])),color:"primary"},null,8,["icon"]),d(j,{flat:"",round:"",icon:e.ionCloseOutline,onClick:t[5]||(t[5]=i=>e.cancel())},null,8,["icon"])]),key:"0"},e.props.multiple?{name:"selected-item",fn:u(i=>[d(At,{class:"ellipsis",removable:"",dense:"",color:"secondary",onRemove:m=>i.removeAtIndex(i.index),tabindex:i.tabindex},{default:u(()=>[R(b(i.opt?.label??i.opt),1)]),_:2},1032,["onRemove","tabindex"])]),key:"1"}:void 0]),1032,["multiple","get-list","rules","hint","modelValue"]))]),_:1})):O("",!0)],64)}const Hi=Re(Vi,[["render",qi],["__file","editableAutocomplete.vue"]]),Wi=xe({__name:"recipeDetailProperties",props:fe({createMode:{type:Boolean},rules:{},editTransform:{}},{modelValue:{required:!1,default:{}},modelModifiers:{}}),emits:fe(["onChange"],["update:modelValue"]),setup(o,{expose:t,emit:l}){const e=o,a=Ue(o,"modelValue"),p=l,i=F(null),m=F(null),k=F(null),C=F(null),g=F(null),{t:v}=dt({useScope:"global"}),{getAutocomplete:E}=So(),{folderAutocomplete:_,getFolders:I}=Pn(),{minLength:M,integer:L,minValue:W}=mt(),G=F(!1),S=F([]),Q=v("recipeDetail.day"),A=v("recipeDetail.hour"),K=v("recipeDetail.minute"),pe={from:(z=0)=>{const Y=Math.floor(z/1440),le=Math.floor((z-Y*1440)/60).toString().padStart(2,"0"),se=Math.round(z%60).toString().padStart(2,"0");return`${Y.toString().padStart(2,"0")}${Q}   ${le}${A}   ${se}${K}`},to:(z="")=>{const[Y,le,se]=z.split("   ").map(Te=>Number(Te.replaceAll("_","0").substring(0,2)));return se+le*60+Y*1440}},Fe=(z=0)=>{let Y="";const le=Math.floor(z/1440);le&&(Y+=`${le}${Q}   `);const se=Math.floor((z-le*1440)/60);se&&(Y+=`${se}${A}   `);const Te=Math.round(z%60);return Te&&(Y+=`${Te}${K}   `),Y};t({async submit(){await Promise.all([i?.value?.submit(),m?.value?.submit(),k?.value?.submit(),g?.value?.submit(),C?.value?.submit()])}}),ke(a,()=>{a.value.folders?.length&&(G.value=!0,I({filter:[{key:"id",type:"MultiString",data:a.value.folders}]}).then(z=>{G.value=!1,S.value=z.items.map(Y=>({label:Y.name,value:Y.id}))}))},{immediate:!0});const we={props:e,model:a,emit:p,categoryRef:i,complexityRef:m,peopleCountRef:k,preparationTimeRef:C,folderRef:g,t:v,getAutocomplete:E,folderAutocomplete:_,getFolders:I,minLength:M,integer:L,minValue:W,isLoading:G,foldersModel:S,dayPrefix:Q,hourPrefix:A,minutePrefix:K,preparationTimeEditTransform:pe,preparationTimeViewTransform:Fe,get ionPricetagOutline(){return un},get ionHappyOutline(){return mn},get ionFolderOpenOutline(){return fn},get ionRocketOutline(){return pn},get ionTimeOutline(){return gn},get EditableTextType(){return Sn},EditableText:Co,EditableAutocomplete:Hi};return Object.defineProperty(we,"__isScriptSetup",{enumerable:!1,value:!0}),we}}),ji={class:"flex justify-center q-pt-sm col col-1 col-xs-1 col-sm-1 col-md-2 col-lg-2 col-xl-1"},Gi={class:"col col-11 col-xs-11 col-sm-10 col-md-10 col-lg-10 col-xl-11"},Qi={class:"flex justify-center q-pt-sm col col-1 col-xs-1 col-sm-1 col-md-2 col-lg-2 col-xl-1"},Yi={class:"col col-11 col-xs-11 col-sm-10 col-md-10 col-lg-10 col-xl-11"},Xi={class:"flex justify-center q-pt-sm col col-1 col-xs-1 col-sm-1 col-md-2 col-lg-2 col-xl-1"},Ki={class:"col col-11 col-xs-11 col-sm-10 col-md-10 col-lg-10 col-xl-11"},Zi={class:"flex justify-center q-pt-sm col col-1 col-xs-1 col-sm-1 col-md-2 col-lg-2 col-xl-1"},Ji={class:"col col-11 col-xs-11 col-sm-10 col-md-10 col-lg-10 col-xl-11"},$i={class:"flex justify-center q-pt-sm col col-1 col-xs-1 col-sm-1 col-md-2 col-lg-2 col-xl-1"},el={class:"col col-11 col-xs-11 col-sm-10 col-md-10 col-lg-10 col-xl-11"};function tl(o,t,l,e,a,p){return y(),w(ze,{class:"q-mb-md"},{default:u(()=>[d(q,{class:"row"},{default:u(()=>[D("div",ji,[d(ye,{name:e.ionPricetagOutline,size:"sm",color:"secondary"},null,8,["name"]),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipe.category")),1)]),_:1})]),D("div",Gi,[d(e.EditableAutocomplete,{modelValue:e.model.category,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model.category=i),rules:[e.minLength(1)],"allow-custom-input":!0,"create-mode":e.props.createMode,hint:"recipe.category",ref:"categoryRef",onOnChange:t[1]||(t[1]=(i,m)=>e.emit("onChange",{category:i},m)),"get-list":i=>e.getAutocomplete("category",i)},null,8,["modelValue","rules","create-mode","get-list"])])]),_:1}),d(q,{class:"row"},{default:u(()=>[D("div",Qi,[d(ye,{name:e.ionRocketOutline,size:"sm",color:"secondary"},null,8,["name"]),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipe.complexity")),1)]),_:1})]),D("div",Yi,[d(e.EditableAutocomplete,{modelValue:e.model.complexity,"onUpdate:modelValue":t[2]||(t[2]=i=>e.model.complexity=i),rules:[e.minLength(1)],"allow-custom-input":!0,"create-mode":e.props.createMode,hint:"recipe.complexity",ref:"complexityRef",onOnChange:t[3]||(t[3]=(i,m)=>e.emit("onChange",{complexity:i},m)),"get-list":i=>e.getAutocomplete("complexity",i)},null,8,["modelValue","rules","create-mode","get-list"])])]),_:1}),d(q,{class:"row"},{default:u(()=>[D("div",Xi,[d(ye,{name:e.ionTimeOutline,size:"sm",color:"secondary"},null,8,["name"]),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipe.preparationTime")),1)]),_:1})]),D("div",Ki,[d(e.EditableText,{type:e.EditableTextType.Text,modelValue:e.model.preparationTime,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model.preparationTime=i),ref:"preparationTimeRef",hint:"recipe.preparationTime",mask:`##${o.$t("recipeDetail.day")}   ##${o.$t("recipeDetail.hour")}   ##${o.$t("recipeDetail.minute")}`,"edit-transform":e.preparationTimeEditTransform,"view-transform":e.preparationTimeViewTransform,"create-mode":e.props.createMode,onOnChange:t[5]||(t[5]=(i,m)=>e.emit("onChange",{preparationTime:i},m))},null,8,["type","modelValue","mask","create-mode"])])]),_:1}),d(q,{class:"row"},{default:u(()=>[D("div",Zi,[d(ye,{name:e.ionHappyOutline,size:"sm",class:"q-pd-md",color:"secondary"},null,8,["name"]),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipe.peopleCount")),1)]),_:1})]),D("div",Ji,[d(e.EditableText,{type:e.EditableTextType.Number,modelValue:e.model.peopleCount,"onUpdate:modelValue":t[6]||(t[6]=i=>e.model.peopleCount=i),ref:"peopleCountRef",hint:"recipe.peopleCount","create-mode":e.props.createMode,rules:[e.integer,e.minValue(0)],onOnChange:t[7]||(t[7]=(i,m)=>e.emit("onChange",{peopleCount:i},m))},null,8,["type","modelValue","create-mode","rules"])])]),_:1}),d(q,{class:"row"},{default:u(()=>[D("div",$i,[d(ye,{name:e.ionFolderOpenOutline,size:"sm",class:"q-pd-md",color:"secondary"},null,8,["name"]),d(re,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:u(()=>[R(b(o.$t("recipeBook.name")),1)]),_:1})]),D("div",el,[d(e.EditableAutocomplete,{modelValue:e.foldersModel,"onUpdate:modelValue":t[8]||(t[8]=i=>e.foldersModel=i),rules:[e.minLength(1)],multiple:!0,ref:"folderRef",hint:"recipeBook.name","create-mode":e.props.createMode,onOnChange:t[9]||(t[9]=(i,m)=>e.emit("onChange",{folders:i?.map(k=>k.value)},m)),"get-list":e.folderAutocomplete},null,8,["modelValue","rules","create-mode","get-list"])])]),_:1})]),_:1})}const ol=Re(Wi,[["render",tl],["__file","recipeDetailProperties.vue"]]),nl=xe({__name:"recipeDetail",props:{createMode:{type:Boolean}},setup(o,{expose:t}){t();const l=o,e=hn(),a=yn(),{getRecipeById:p,editRecipe:i,creteRecipe:m}=En(),{minLength:k,required:C}=mt(),{updateTitle:g}=Cn(),v=F(!1),E=F({}),_=F(null),I=F(null),M=F(null),L=F(null),W=F(null);async function G(A,K){if(l.createMode)E.value={...E.value,...A};else{const pe=await i(E.value.id,{...E.value,...A});if(!pe){await a.push({name:"NotFound"});return}E.value=pe,E.value?.name&&g(1,E.value.name)}typeof K=="function"&&K()}async function S(){await Promise.all([_,I,M,L,W].map(K=>K?.value?.submit()));const A=await m(E.value);await a.push({name:"RecipeDetail",params:{id:A.id}})}Oe(()=>{l.createMode&&(E.value=Fn),l.createMode||ke(()=>e.params.id,async A=>{if(v.value=!0,e.name!=="RecipeDetail")return;if(!A||typeof A!="string"){await a.push({name:"NotFound"});return}await _n();const K=await p(A);if(!K){await a.push({name:"NotFound"});return}E.value=K,v.value=!1,g(1,E.value.name)},{immediate:!0})});const Q={props:l,route:e,router:a,getRecipeById:p,editRecipe:i,creteRecipe:m,minLength:k,required:C,updateTitle:g,isLoading:v,recipe:E,headerComponentRef:_,ingredientComponentRef:I,instructionComponentRef:M,caloriesComponentRef:L,detailsComponentRef:W,update:G,create:S,EditableText:Co,EditableIngredients:Jn,FavoriteIcon:xn,EditableInstruction:Mi,RecipeDetailCalories:Fi,RecipeDetailProperties:ol};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),il=o=>(vn("data-v-20bf7ea0"),o=o(),Tn(),o),ll={key:0,class:"row q-col-gutter-x-md q-col-gutter-y-md"},rl={class:"col-12 title-height"},al={key:1,class:"row q-col-gutter-x-md q-col-gutter-y-md"},sl={class:"col col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-4"},cl={class:"col col-xs-12 col-sm-12 col-md-6 col-lg-5 col-xl-5"},dl={class:"text-h6 text-capitalize"},ul={class:"col col-xs-12 col-sm-12 col-md-5 col-lg-3 col-xl-3"},ml=il(()=>D("div",{lass:"q-mb-md"},null,-1)),fl={key:2,class:"row q-col-gutter-x-md q-col-gutter-y-md"},pl={class:"col"},gl={key:3,class:"row q-col-gutter-x-md q-col-gutter-y-md"},hl={class:"col flex justify-end"};function yl(o,t,l,e,a,p){return y(),w(bn,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:u(()=>[d(Go,{showing:e.isLoading},null,8,["showing"]),e.isLoading?O("",!0):(y(),$("div",ll,[D("div",rl,[d(e.EditableText,{class:"text-h5",rules:[e.required,e.minLength(2)],modelValue:e.recipe.name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.recipe.name=i),ref:"headerComponentRef","create-mode":e.props.createMode,placeholder:o.$t("recipe.name"),onOnChange:t[2]||(t[2]=(i,m)=>e.update({name:i},m))},{favoriteButtons:u(()=>[d(e.FavoriteIcon,{favorite:e.recipe?.favorite,onOnChange:t[0]||(t[0]=i=>e.update({favorite:i}))},null,8,["favorite"])]),_:1},8,["rules","modelValue","create-mode","placeholder"])])])),e.isLoading?O("",!0):(y(),$("div",al,[D("div",sl,[d(ze,null,{default:u(()=>[d(q,null,{default:u(()=>[d(Qo,{"no-native-menu":"",src:e.recipe?.imageUrl,fit:"fill",loading:"lazy",height:"400px"},null,8,["src"])]),_:1})]),_:1})]),D("div",cl,[d(ze,null,{default:u(()=>[d(q,null,{default:u(()=>[D("div",dl,b(o.$t("recipeDetail.ingredient")),1)]),_:1}),d(e.EditableIngredients,{modelValue:e.recipe.ingredients,"onUpdate:modelValue":t[3]||(t[3]=i=>e.recipe.ingredients=i),ref:"ingredientComponentRef","create-mode":e.props.createMode,onOnChange:t[4]||(t[4]=(i,m)=>e.update({ingredients:i},m))},null,8,["modelValue","create-mode"])]),_:1})]),D("div",ul,[d(e.RecipeDetailProperties,{modelValue:e.recipe,"onUpdate:modelValue":t[5]||(t[5]=i=>e.recipe=i),onOnChange:t[6]||(t[6]=(i,m)=>e.update(i??{},m)),ref:"detailsComponentRef","create-mode":e.props.createMode},null,8,["modelValue","create-mode"]),ml,d(e.RecipeDetailCalories,{modelValue:e.recipe.calories,"onUpdate:modelValue":t[7]||(t[7]=i=>e.recipe.calories=i),onOnChange:t[8]||(t[8]=(i,m)=>e.update({calories:i},m)),ref:"caloriesComponentRef","create-mode":e.props.createMode},null,8,["modelValue","create-mode"])])])),e.isLoading?O("",!0):(y(),$("div",fl,[D("div",pl,[d(e.EditableInstruction,{modelValue:e.recipe.instruction,"onUpdate:modelValue":t[9]||(t[9]=i=>e.recipe.instruction=i),ref:"instructionComponentRef","create-mode":e.props.createMode,onOnChange:t[10]||(t[10]=(i,m)=>e.update({instruction:i},m))},null,8,["modelValue","create-mode"])])])),e.isLoading?O("",!0):(y(),$("div",gl,[D("div",hl,[l.createMode?(y(),w(j,{key:0,onClick:t[11]||(t[11]=i=>e.create()),color:"primary"},{default:u(()=>[R(b(o.$t("recipe.add")),1)]),_:1})):O("",!0)])])),d(st,{style:{"margin-bottom":"250px"}})]),_:1})}const Ql=Re(nl,[["render",yl],["__scopeId","data-v-20bf7ea0"],["__file","recipeDetail.vue"]]);export{Ql as default};
