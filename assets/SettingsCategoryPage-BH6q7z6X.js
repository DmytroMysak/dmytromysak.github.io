import{Q as k}from"./QCardSection-NG0FHRHY.js";import{U as V,ay as N,V as A,I as s,b1 as p,N as R,aX as z,bq as B,aC as U,Y as F,Z as n,ag as r,a1 as o,a0 as i,a4 as w,a5 as h,a3 as O,as as L,av as j}from"./index-CmuCMgBa.js";import{Q as D}from"./QInput-Lm2QrpE2.js";import{Q as M,a as S}from"./QTr-oK-54oaG.js";import{Q as X}from"./QTable-8EEMW2-E.js";import{Q as Y}from"./QCard-C4N2OtfF.js";import{A as Z}from"./QSelect-B1fV5hfF.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./QSeparator-BZj1x5fP.js";import"./QCheckbox-WeQmrjpL.js";import"./use-fullscreen-D4Edpx92.js";import"./History-BRlARYUr.js";import"./is-BddHB8T5.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./rtl-DFPa-2ov.js";import"./format-Dq9uPdyY.js";const E=V({__name:"SettingsCategoryPage",setup(d,{expose:t}){t();const g=N(),{t:e}=A({useScope:"global"}),{getAutocompleteAdvanced:f,deleteFromAutocomplete:_}=Z(),a=s(!1),c=s(),v=s(),u=s([]),l=s({page:1,rowsPerPage:10,rowsNumber:0}),b=[{name:"index",label:"#",field:"index",align:"center"},{name:"name",label:p(e("settings.categories.name")),field:"category",align:"center"},{name:"delete",label:p(e("delete")),field:"delete",align:"center"}];async function I(m){const{page:y,rowsPerPage:Q}=m?.pagination??l.value;a.value=!0;const{totalFiltered:T,items:q}=await f("category",{search:v.value,page:y,pageSize:Q});l.value.rowsNumber=T,l.value.page=y,l.value.rowsPerPage=Q,u.value=q,a.value=!1}async function P(m){a.value||g.dialog({title:p(e("delete")),message:e("deleteConfirmation",{item:u.value[m]}),cancel:!0,persistent:!0}).onOk(async()=>{a.value=!0,await _("category",u.value[m]),c?.value.requestServerInteraction()})}function x(){v.value=""}R(()=>{setTimeout(()=>c?.value.requestServerInteraction())});const C={$q:g,t:e,getAutocompleteAdvanced:f,deleteFromAutocomplete:_,isLoading:a,tableRef:c,search:v,rows:u,pagination:l,columns:b,onRequest:I,deleteItem:P,clearSearch:x,capitalize:p,get ionTrashOutline(){return z},get ionSearchOutline(){return B},get ionCloseOutline(){return U}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}});function G(d,t,g,e,f,_){return n(),r(Y,{class:"col"},{default:o(()=>[i(k,null,{default:o(()=>[w(h(e.capitalize(d.$t("settings.categories.description"))),1)]),_:1}),i(k,null,{default:o(()=>[i(X,{ref:"tableRef",rows:e.rows,"row-key":"index",pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=a=>e.pagination=a),filter:e.search,loading:e.isLoading,"rows-per-page-options":[10,20,50,100],onRequest:e.onRequest,columns:e.columns},{"top-right":o(()=>[i(D,{dense:"",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=a=>e.search=a),label:d.$t("search"),debounce:"350",color:"secondary"},{append:o(()=>[e.search?(n(),r(O,{key:0,name:e.ionCloseOutline,onClick:e.clearSearch,class:"cursor-pointer"},null,8,["name"])):L("",!0),i(O,{name:e.ionSearchOutline},null,8,["name"])]),_:1},8,["modelValue","label"])]),body:o(a=>[(n(),r(M,{props:a,key:`m_${a.row.index}`},{default:o(()=>[(n(),r(S,{"auto-width":"",key:e.columns[0].name,props:a},{default:o(()=>[w(h(a.rowIndex+1),1)]),_:2},1032,["props"])),(n(),r(S,{"auto-width":"",key:e.columns[1].name,props:a},{default:o(()=>[w(h(a.row),1)]),_:2},1032,["props"])),(n(),r(S,{"auto-width":"",key:e.columns[1].name,props:a},{default:o(()=>[i(j,{round:"",flat:"",icon:e.ionTrashOutline,onClick:c=>e.deleteItem(a.rowIndex),color:"secondary"},null,8,["icon","onClick"])]),_:2},1032,["props"]))]),_:2},1032,["props"]))]),_:1},8,["rows","pagination","filter","loading"])]),_:1})]),_:1})}const pe=F(E,[["render",G],["__file","SettingsCategoryPage.vue"]]);export{pe as default};
