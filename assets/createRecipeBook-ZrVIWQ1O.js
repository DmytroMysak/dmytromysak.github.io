import{Q as A}from"./QInnerLoading-86XDDgru.js";import{Q as C}from"./QCardSection-NG0FHRHY.js";import{U as E,X as z,W as T,I as g,bc as U,N,L as O,aE as D,Y as P,Z as f,ag as j,a1 as a,a0 as o,aj as s,a5 as c,av as M,a4 as u,a6 as G,aF as W,aG as X,a2 as q,$ as h,ar as Y,a7 as Z,as as H}from"./index-CmuCMgBa.js";import{a as J,Q as K}from"./QCardActions-CLJaF5Bu.js";import{Q as $}from"./QCard-C4N2OtfF.js";import{Q as ee,a as w}from"./QSelect-B1fV5hfF.js";import{Q as te}from"./QPage-Blsos2c0.js";import{F as oe}from"./folder.service-3sR9fq5W.js";import{V as ae}from"./validation.service-Bh9qf873.js";import{R as ie}from"./recipe.service-B2BkU8jg.js";import{f as re}from"./format-Dq9uPdyY.js";import{C as le}from"./confirmationOnLeave.service-BRmX8Fqq.js";import{B as se}from"./breadcrumb.service-B5JON7r2.js";import{E as ne}from"./editableText-Bw7tCjDH.js";import{L as me}from"./listItem-DaZeiiGx.js";import{S as de}from"./searchAutocomplete-DxeGRu9i.js";import{R as ce}from"./recipeItemActions-DR6360ev.js";import"./QInput-Lm2QrpE2.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./History-BRlARYUr.js";import"./rtl-DFPa-2ov.js";import"./is-BddHB8T5.js";import"./QForm-BI170nwI.js";import"./QBtnDropdown-BGAbgpwa.js";import"./QImg-BWxTlY2N.js";import"./ClosePopup-Bnjv8jFB.js";import"./index-BkI8a_iM.js";const ue=E({__name:"createRecipeBook",setup(n,{expose:i}){i();const{capitalize:y}=re,t=z(),p=T(),{creteFolder:_,getFolderById:e,editFolder:m}=oe(),{getRecipes:x}=ie(),{minLength:k,required:S}=ae(),{updateTitle:L}=se(),{onMountedConfirmationOnLeave:R,onUnmountedConfirmationOnLeave:Q}=le(),v=g(!1),r=g({name:U,type:"recipe",imageUrl:"/folder.jpg",items:[]}),b=g(null);async function V(l){const{items:d}=await x(l);return d}async function F(l,d){r.value={...r.value,...l},typeof d=="function"&&d()}async function I(){b?.value?.submit();const l=r.value?.id?await m(r.value.id,r.value):await _(r.value);await p.push({name:"RecipeBookDetail",params:{id:l?.id}})}N(()=>{O(()=>t.query.folderId,async l=>{if(!l||typeof l!="string")return;v.value=!0;const d=await e(l);d&&(r.value=d,L(1,r.value.name)),v.value=!1},{immediate:!0}),R("RecipeBookDetail")}),D(()=>Q());const B={capitalize:y,route:t,router:p,creteFolder:_,getFolderById:e,editFolder:m,getRecipes:x,minLength:k,required:S,updateTitle:L,onMountedConfirmationOnLeave:R,onUnmountedConfirmationOnLeave:Q,isLoading:v,folder:r,headerComponentRef:b,getList:V,update:F,create:I,EditableText:ne,ListItem:me,SearchAutocomplete:de,RecipeItemActions:ce};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),fe={class:"row q-col-gutter-x-md q-col-gutter-y-md"},pe={class:"col"},_e={class:"text-h5 text-capitalize"},ve={class:"row q-col-gutter-x-md q-col-gutter-y-md"},ge={class:"col-12 title-height"},he=["src"],ye={class:"row q-col-gutter-x-md q-col-gutter-y-md"},xe={key:0,class:"flex flex-center full-width"},Le={class:"text-h5"};function Re(n,i,y,t,p,_){return f(),j(te,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:a(()=>[o(A,{showing:t.isLoading},null,8,["showing"]),s("div",fe,[s("div",pe,[o($,{class:"q-pa-sm"},{default:a(()=>[o(C,{horizontal:"",class:"justify-between"},{default:a(()=>[o(C,{horizontal:""},{default:a(()=>[s("div",_e,c(n.$t("recipeBook.createTitle")),1)]),_:1}),o(J,{class:"q-pa-none"},{default:a(()=>[o(M,{onClick:i[0]||(i[0]=e=>t.create()),color:"primary"},{default:a(()=>[u(c(t.folder?.id?n.$t("edit"):n.$t("create")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),s("div",ve,[s("div",ge,[o(t.EditableText,{class:"text-h5",rules:[t.required,t.minLength(2)],modelValue:t.folder.name,"onUpdate:modelValue":i[1]||(i[1]=e=>t.folder.name=e),ref:"headerComponentRef","create-mode":!0,placeholder:n.$t("recipeBook.name"),onOnChange:i[2]||(i[2]=(e,m)=>t.update({name:e},m))},null,8,["rules","modelValue","placeholder"])])]),o(t.SearchAutocomplete,{label:n.$t("recipe.name",2),multiple:!0,"get-list":t.getList,modelValue:t.folder.items,"onUpdate:modelValue":i[3]||(i[3]=e=>t.folder.items=e),class:"full-width"},{"selected-item":a(e=>[o(ee,{class:"ellipsis",removable:"",dense:"",color:"teal",onRemove:m=>e.removeAtIndex(e.index),tabindex:e.tabindex},{default:a(()=>[u(c(e.opt.name),1)]),_:2},1032,["onRemove","tabindex"])]),option:a(e=>[o(G,W(X(e.itemProps)),{default:a(()=>[o(q,{thumbnail:""},{default:a(()=>[s("img",{src:e.opt.imageUrl,loading:"lazy"},null,8,he)]),_:2},1024),o(q,null,{default:a(()=>[o(w,{class:"ellipsis",style:{width:"168px"}},{default:a(()=>[u(c(t.capitalize(e.opt.name)),1)]),_:2},1024),o(w,{caption:"",lines:"1"},{default:a(()=>[u(c(e.opt.category),1)]),_:2},1024),o(K,{anchor:"top middle",offset:[14,30],delay:150},{default:a(()=>[u(c(t.capitalize(e.opt.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["label","modelValue"]),s("div",ye,[(f(!0),h(Z,null,Y(t.folder.items,(e,m)=>(f(),h("div",{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",key:m},[o(t.ListItem,{item:e},{moreActions:a(()=>[o(t.RecipeItemActions,{item:e},null,8,["item"])]),_:2},1032,["item"])]))),128)),t.folder?.items?.length?H("",!0):(f(),h("div",xe,[s("div",Le,c(n.$t("emptyListMessage")),1)]))])]),_:1})}const Ke=P(ue,[["render",Re],["__file","createRecipeBook.vue"]]);export{Ke as default};
