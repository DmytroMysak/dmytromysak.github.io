import{Q as R}from"./QSkeleton-BJfC7NnZ.js";import{U as A,ay as I,W as T,V as N,I as f,N as V,aA as z,aX as H,bf as M,b1 as j,Y as D,Z as r,ag as E,a1 as L,a0 as l,$ as n,a7 as w,ar as b,aj as U,a5 as W,as as C,av as X}from"./index-CmuCMgBa.js";import{P as Y,Q as Z}from"./paginationPageSize-D7MNSaKA.js";import{Q as G}from"./QPage-Blsos2c0.js";import{F as J}from"./folder.service-3sR9fq5W.js";import{s as K,S as $}from"./searchFilter-B46quSSD.js";import{F as q}from"./QCardActions-CLJaF5Bu.js";import{L as ee}from"./listItem-DaZeiiGx.js";import"./QInput-Lm2QrpE2.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./format-Dq9uPdyY.js";import"./QSelect-B1fV5hfF.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./History-BRlARYUr.js";import"./rtl-DFPa-2ov.js";import"./is-BddHB8T5.js";import"./QBtnDropdown-BGAbgpwa.js";import"./ClosePopup-Bnjv8jFB.js";import"./recipe.service-B2BkU8jg.js";import"./QCardSection-NG0FHRHY.js";import"./QCard-C4N2OtfF.js";import"./QCheckbox-WeQmrjpL.js";import"./QForm-BI170nwI.js";import"./searchAutocomplete-DxeGRu9i.js";import"./QImg-BWxTlY2N.js";const oe=A({__name:"recipeBookList",setup(g,{expose:y}){y();const d=I(),e=T(),{t:c}=N({useScope:"global"}),{getFolders:m,editFolder:t,removeFolder:v}=J(),{filter:_,search:k,page:F,pageSize:h,sortBy:B}=K(q.RecipeBook),p=f(!1),i=f([]),x=f(0),Q=[{title:"delete",icon:H},{title:"recipeBook.createFromFolder",icon:M}];function u(){p.value=!0,m({filter:_.value,search:k.value,page:F.value,pageSize:h.value,sortBy:B.value}).then(o=>{i.value=o.items,x.value=o.totalFiltered}).finally(()=>{p.value=!1})}const S={"favorite.add":async o=>{const a=await t(o.id,{favorite:!0});i.value=i.value.map(s=>s.id===a?.id?a:s)},"favorite.remove":async o=>{const a=await t(o.id,{favorite:!1});i.value=i.value.map(s=>s.id===a?.id?a:s)},"recipeBook.createFromFolder":async o=>{await e.push({name:"CreateShopping",query:{folderId:o.id}})},delete:async o=>{d.dialog({title:j(c("delete")),message:c("deleteConfirmation",{item:o.name}),cancel:!0,persistent:!0}).onOk(async()=>{await v(o.id),u()})}},P=(o,a)=>S[o]?.(a);V(u);const O={$q:d,router:e,t:c,getFolders:m,editFolder:t,removeFolder:v,filter:_,search:k,page:F,pageSize:h,sortBy:B,isLoading:p,folders:i,totalFiltered:x,menuOptions:Q,loadFolders:u,itemMenuOptionHandler:S,menuHandler:P,get FilterType(){return q},get ionAddOutline(){return z},SearchFilter:$,ListItem:ee,Pagination:Y};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}}),te={key:0,class:"row q-col-gutter-x-md q-col-gutter-y-md"},ae={key:0,class:"flex flex-center full-width"},re={class:"text-h5"},ie={key:1,class:"row q-gutter-md"};function le(g,y,d,e,c,m){return r(),E(G,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:L(()=>[l(e.SearchFilter,{onOnChange:e.loadFolders,"filter-key":e.FilterType.RecipeBook},null,8,["filter-key"]),e.isLoading?e.isLoading?(r(),n("div",ie,[(r(),n(w,null,b(5,t=>l(R,{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",height:"300px",key:t})),64))])):C("",!0):(r(),n("div",te,[(r(!0),n(w,null,b(e.folders,t=>(r(),n("div",{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",key:t.id},[l(e.ListItem,{item:t,"menu-options":e.menuOptions,"on-click-router-name":"RecipeBookDetail",onOnChange:e.menuHandler},null,8,["item"])]))),128)),l(e.Pagination,{"filter-key":e.FilterType.RecipeBook,"total-filtered":e.totalFiltered,onOnChange:e.loadFolders},null,8,["filter-key","total-filtered"]),e.folders.length?C("",!0):(r(),n("div",ae,[U("div",re,W(g.$t("emptyListMessage")),1)]))])),l(Z,{position:"bottom-right",offset:[18,18]},{default:L(()=>[l(X,{fab:"",icon:e.ionAddOutline,color:"primary",to:{name:"RecipeBookCreate"},disable:e.isLoading},null,8,["icon","disable"])]),_:1})]),_:1})}const Re=D(oe,[["render",le],["__file","recipeBookList.vue"]]);export{Re as default};
