import{Q as _}from"./QCardSection-NG0FHRHY.js";import{U as E,X as I,W as L,I as c,N as T,L as w,aE as Q,Y as O,Z as N,ag as P,a1 as i,aj as r,a0 as a,a5 as h,av as R,a4 as U}from"./index-CmuCMgBa.js";import{a as B}from"./QCardActions-CLJaF5Bu.js";import{Q as b}from"./QCard-C4N2OtfF.js";import{Q as D}from"./QPage-Blsos2c0.js";import{S as F}from"./shopping.service-CSEzRJCL.js";import{V as j}from"./validation.service-Bh9qf873.js";import{D as k,c as z}from"./ingredientCalculator.utils-CnrQgiY1.js";import{F as A}from"./folder.service-3sR9fq5W.js";import{C as M}from"./confirmationOnLeave.service-BRmX8Fqq.js";import{E as G}from"./editableText-Bw7tCjDH.js";import{E as H}from"./editableItems-WOirbmNq.js";import"./random.utils--ZVVX1T7.js";import"./QSelect-B1fV5hfF.js";import"./QInput-Lm2QrpE2.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./History-BRlARYUr.js";import"./rtl-DFPa-2ov.js";import"./is-BddHB8T5.js";import"./format-Dq9uPdyY.js";import"./ingredient.constant-DXTw5qQM.js";import"./recipe.service-B2BkU8jg.js";import"./QForm-BI170nwI.js";import"./QCheckbox-WeQmrjpL.js";import"./QExpansionItem-BRzWrkZm.js";import"./QSeparator-BZj1x5fP.js";const W=E({__name:"createShopping",setup(m,{expose:t}){t();const u=I(),e=L(),{creteShopping:f}=F(),{getFolderById:g}=A(),{required:o,minLength:p}=j(),{onMountedConfirmationOnLeave:v,onUnmountedConfirmationOnLeave:S}=M(),d=c(!1),n=c({name:k,ingredients:[]}),x=c(null),q=c(null);function C(s,l){n.value={...n.value,...s},l?.()}async function V(){if(d.value=!0,await Promise.all([x,q].map(l=>l?.value?.submit())),n.value?.ingredients?.length)return;const s=await f(n.value).finally(()=>{d.value=!1});await e.push({name:"ShoppingDetail",params:{id:s.id}})}T(()=>{w(()=>u.query.folderId,async s=>{if(!s||typeof s!="string")return;d.value=!0;const l=await g(s);if(!l){d.value=!1;return}n.value.name=l.name,n.value.ingredients=z(l.items),d.value=!1},{immediate:!0}),v("ShoppingDetail")}),Q(()=>S());const y={route:u,router:e,creteShopping:f,getFolderById:g,required:o,minLength:p,onMountedConfirmationOnLeave:v,onUnmountedConfirmationOnLeave:S,isLoading:d,shopping:n,editableTextRef:x,editableItemsRef:q,update:C,create:V,EditableText:G,EditableItems:H};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),X={class:"row q-col-gutter-x-md q-col-gutter-y-md"},Y={class:"col"},Z={class:"text-h5 text-capitalize"},J={class:"row q-col-gutter-x-md q-col-gutter-y-md"},K={class:"col col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 title-height"},$={class:"row q-col-gutter-x-md q-col-gutter-y-md"},ee={class:"col"},te={class:"text-h6 text-capitalize"};function oe(m,t,u,e,f,g){return N(),P(D,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:i(()=>[r("div",X,[r("div",Y,[a(b,{class:"q-pa-sm"},{default:i(()=>[a(_,{horizontal:"",class:"justify-between"},{default:i(()=>[a(_,null,{default:i(()=>[r("div",Z,h(m.$t("shopping.createTitle")),1)]),_:1}),a(B,{class:"q-pa-none"},{default:i(()=>[a(R,{onClick:t[0]||(t[0]=o=>e.create()),color:"primary"},{default:i(()=>[U(h(m.$t("create")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),r("div",J,[r("div",K,[a(e.EditableText,{class:"text-h5",modelValue:e.shopping.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.shopping.name=o),rules:[e.required,e.minLength(1)],"create-mode":!0,ref:"editableTextRef",placeholder:m.$t("shopping.createTitlePlaceholder"),onOnChange:t[2]||(t[2]=(o,p)=>e.update({name:o},p))},null,8,["modelValue","rules","placeholder"])])]),r("div",$,[r("div",ee,[a(b,{id:"list"},{default:i(()=>[a(_,null,{default:i(()=>[r("div",te,h(m.$t("shopping.name")),1)]),_:1}),a(e.EditableItems,{modelValue:e.shopping.ingredients,"onUpdate:modelValue":t[3]||(t[3]=o=>e.shopping.ingredients=o),"create-mode":!0,ref:"editableItemsRef",onOnChange:t[4]||(t[4]=(o,p)=>e.update({ingredients:o},p))},null,8,["modelValue"])]),_:1})])])]),_:1})}const Qe=O(W,[["render",oe],["__scopeId","data-v-6a44f804"],["__file","createShopping.vue"]]);export{Qe as default};
