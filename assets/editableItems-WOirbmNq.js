import{U as it,aH as Se,aI as rt,V as Wt,I as pe,N as Ct,L as zt,aC as Qt,Y as at,Z as A,$ as z,aj as ye,a0 as y,a1 as E,a4 as j,a5 as G,a6 as bt,aF as pn,aG as mn,a2 as ve,av as Ne,aJ as gn,ag as le,a7 as _e,ar as yt,ai as jt,as as _t,aK as vn,aL as bn,aM as yn,aN as _n,aO as En,aP as wn,aQ as At,M as Sn,aR as Dn,aS as Cn,ah as Pt,aT as In,aU as st,a3 as Ue}from"./index-CmuCMgBa.js";import{Q as Gt}from"./QCardSection-NG0FHRHY.js";import{Q as Mt,a as qt}from"./QCardActions-CLJaF5Bu.js";import{Q as On}from"./QForm-BI170nwI.js";import{a as Tn}from"./editableText-Bw7tCjDH.js";import{I as Kt}from"./ingredient.constant-DXTw5qQM.js";import{A as xn,b as Nt,a as je}from"./QSelect-B1fV5hfF.js";import{Q as An}from"./QInput-Lm2QrpE2.js";import{V as Pn}from"./validation.service-Bh9qf873.js";import{f as Mn}from"./format-Dq9uPdyY.js";import{Q as kt}from"./QCheckbox-WeQmrjpL.js";import{Q as Nn}from"./QExpansionItem-BRzWrkZm.js";const kn=it({__name:"editItem",props:{modelValue:{required:!0},modelModifiers:{}},emits:Se(["onDelete"],["update:modelValue"]),setup(o,{expose:e,emit:n}){e();const t=rt(o,"modelValue"),i=n,{capitalize:a}=Mn,{getAutocomplete:r}=xn(),{required:l,numeric:s,minValue:d}=Pn(),{locale:c,t:f}=Wt({useScope:"global"}),g=pe([]),_=pe(),v=(C,U)=>{r("ingredients",{search:C}).then(P=>{U(()=>{g.value=P})})};Ct(()=>{zt(c,()=>{_.value=Object.values(Kt).map(C=>({label:f(`ingredients.type.${C}`),value:C,tooltip:a(f(`ingredients.tooltip.${C}`))}))},{immediate:!0})});const b={model:t,emit:i,capitalize:a,getAutocomplete:r,required:l,numeric:s,minValue:d,locale:c,t:f,options:g,ingredientsType:_,filterValue:v,get ionCloseOutline(){return Qt}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),Vn={class:"row q-col-gutter-x-md q-col-gutter-y-md"},Fn={class:"col col-xs-6 col-sm-6 col-md-6 col-lg-7 col-xl-7"},Rn={class:"col col-xs-3 col-sm-2 col-md-2 col-lg-2 col-xl-2"},Yn={class:"col col-xs-2 col-sm-2 col-md-2 col-lg-2 col-xl-2"},Bn={class:"col col-xs-1 col-sm-1 col-md-1 col-lg-1 col-xl-1"};function Xn(o,e,n,t,i,a){return A(),z("div",Vn,[ye("div",Fn,[y(Nt,{dense:"","use-input":"","fill-input":"","no-error-icon":"","input-debounce":"300","hide-dropdown-icon":"","hide-selected":"",rules:[t.required],hint:t.capitalize(t.t("ingredients.name")),modelValue:t.model.name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.model.name=r),onInputValue:e[1]||(e[1]=r=>t.model.name=r),options:t.options,onFilter:t.filterValue},null,8,["rules","hint","modelValue","options"])]),ye("div",Rn,[y(An,{dense:"","no-error-icon":"",rules:[t.required,t.numeric,t.minValue(0)],hint:t.capitalize(t.t("ingredients.amount")),step:"0.001",type:"text",inputmode:"numeric",modelValue:t.model.number,"onUpdate:modelValue":e[2]||(e[2]=r=>t.model.number=r)},null,8,["rules","hint","modelValue"])]),ye("div",Yn,[y(Nt,{dense:"","no-error-icon":"","hide-dropdown-icon":"","emit-value":"","map-options":"",hint:t.capitalize(t.t("ingredients.units")),modelValue:t.model.type,"onUpdate:modelValue":e[3]||(e[3]=r=>t.model.type=r),options:t.ingredientsType,rules:[t.required]},{selected:E(()=>[j(G(t.t(`ingredients.type.${t.model.type}`))+" ",1),y(Mt,{anchor:"top middle",offset:[14,30],delay:150},{default:E(()=>[j(G(t.capitalize(t.t(`ingredients.tooltip.${t.model.type}`))),1)]),_:1})]),option:E(r=>[y(bt,pn(mn(r.itemProps)),{default:E(()=>[y(ve,null,{default:E(()=>[y(je,{class:"ellipsis"},{default:E(()=>[j(G(r.opt.tooltip),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","rules"])]),ye("div",Bn,[y(Ne,{flat:"",round:"",class:"q-mt-sm",icon:t.ionCloseOutline,onClick:e[4]||(e[4]=r=>t.emit("onDelete"))},{default:E(()=>[y(Mt,{anchor:"top middle",offset:[14,30],delay:150},{default:E(()=>[j(G(o.$t("delete")),1)]),_:1})]),_:1},8,["icon"])])])}const Ln=at(kn,[["render",Xn],["__file","editItem.vue"]]),Un=it({__name:"editItems",props:Se({createMode:{type:Boolean},rules:{},editTransform:{}},{modelValue:{required:!1,default:[]},modelModifiers:{}}),emits:Se(["onChange","onEditMode"],["update:modelValue"]),setup(o,{expose:e,emit:n}){const t=rt(o,"modelValue"),i=o,a=n,{cancel:r,editedValue:l,mountEditableService:s,submit:d,isLoading:c,enableEditMode:f}=Tn(i,a,t);f();const g=C=>l.value?.splice(C,1),_=()=>l.value?.push({name:"",number:1,type:Kt.Pieces,checkbox:!1});function v(){l.value=l.value.map(C=>(C.number=Number(C.number),C)),d()}Ct(()=>{s(),l.value.length||_()}),e({submit:v});const b={model:t,props:i,emit:a,cancel:r,editedValue:l,mountEditableService:s,submit:d,isLoading:c,enableEditMode:f,deleteItem:g,addItem:_,onSubmit:v,get ionCloseOutline(){return Qt},get ionCheckmarkOutline(){return gn},EditIngredient:Ln};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),Hn={class:"row q-col-gutter-x-md q-col-gutter-y-md"},Wn={class:"col-12"};function zn(o,e,n,t,i,a){return A(),le(On,{class:"px-4 mt-n2",onKeyup:e[2]||(e[2]=vn(r=>t.cancel(),["esc"]))},{default:E(()=>[y(Gt,null,{default:E(()=>[(A(!0),z(_e,null,yt(t.editedValue,(r,l)=>(A(),le(t.EditIngredient,{key:l,modelValue:t.editedValue[l],"onUpdate:modelValue":s=>t.editedValue[l]=s,"is-edit-mode":!0,onOnDelete:s=>t.deleteItem(l)},null,8,["modelValue","onUpdate:modelValue","onOnDelete"]))),128)),ye("div",Hn,[ye("div",Wn,[y(Ne,{class:"q-mt-lg full-width",onClick:e[0]||(e[0]=r=>t.addItem()),color:"secondary"},{default:E(()=>[j(G(o.$t("ingredients.addMore")),1)]),_:1})])])]),_:1}),t.props.createMode?_t("",!0):(A(),le(qt,{key:0},{default:E(()=>[y(jt),y(Ne,{loading:t.isLoading,icon:t.ionCheckmarkOutline,onClick:t.onSubmit,color:"primary"},{default:E(()=>[j(G(o.$t("save")),1)]),_:1},8,["loading","icon"]),y(Ne,{icon:t.ionCloseOutline,onClick:e[1]||(e[1]=r=>t.emit("onEditMode"))},{default:E(()=>[j(G(o.$t("cancel")),1)]),_:1},8,["icon"])]),_:1}))]),_:1})}const Qn=at(Un,[["render",zn],["__file","editItems.vue"]]);/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vt(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,t)}return n}function Z(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(n),!0).forEach(function(t){jn(o,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}function Ge(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ge=function(e){return typeof e}:Ge=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(o)}function jn(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function ee(){return ee=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o},ee.apply(this,arguments)}function Gn(o,e){if(o==null)return{};var n={},t=Object.keys(o),i,a;for(a=0;a<t.length;a++)i=t[a],!(e.indexOf(i)>=0)&&(n[i]=o[i]);return n}function qn(o,e){if(o==null)return{};var n=Gn(o,e),t,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(i=0;i<a.length;i++)t=a[i],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(n[t]=o[t])}return n}var Kn="1.15.2";function $(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var te=$(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Be=$(/Edge/i),Ft=$(/firefox/i),ke=$(/safari/i)&&!$(/chrome/i)&&!$(/android/i),Zt=$(/iP(ad|od|hone)/i),Jt=$(/chrome/i)&&$(/android/i),$t={capture:!1,passive:!1};function S(o,e,n){o.addEventListener(e,n,!te&&$t)}function w(o,e,n){o.removeEventListener(e,n,!te&&$t)}function $e(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function Zn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function Q(o,e,n,t){if(o){n=n||document;do{if(e!=null&&(e[0]===">"?o.parentNode===n&&$e(o,e):$e(o,e))||t&&o===n)return o;if(o===n)break}while(o=Zn(o))}return null}var Rt=/\s+/g;function Y(o,e,n){if(o&&e)if(o.classList)o.classList[n?"add":"remove"](e);else{var t=(" "+o.className+" ").replace(Rt," ").replace(" "+e+" "," ");o.className=(t+(n?" "+e:"")).replace(Rt," ")}}function h(o,e,n){var t=o&&o.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function we(o,e){var n="";if(typeof o=="string")n=o;else do{var t=h(o,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function en(o,e,n){if(o){var t=o.getElementsByTagName(e),i=0,a=t.length;if(n)for(;i<a;i++)n(t[i],i);return t}return[]}function K(){var o=document.scrollingElement;return o||document.documentElement}function x(o,e,n,t,i){if(!(!o.getBoundingClientRect&&o!==window)){var a,r,l,s,d,c,f;if(o!==window&&o.parentNode&&o!==K()?(a=o.getBoundingClientRect(),r=a.top,l=a.left,s=a.bottom,d=a.right,c=a.height,f=a.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&o!==window&&(i=i||o.parentNode,!te))do if(i&&i.getBoundingClientRect&&(h(i,"transform")!=="none"||n&&h(i,"position")!=="static")){var g=i.getBoundingClientRect();r-=g.top+parseInt(h(i,"border-top-width")),l-=g.left+parseInt(h(i,"border-left-width")),s=r+a.height,d=l+a.width;break}while(i=i.parentNode);if(t&&o!==window){var _=we(i||o),v=_&&_.a,b=_&&_.d;_&&(r/=b,l/=v,f/=v,c/=b,s=r+c,d=l+f)}return{top:r,left:l,bottom:s,right:d,width:f,height:c}}}function Yt(o,e,n){for(var t=ae(o,!0),i=x(o)[e];t;){var a=x(t)[n],r=void 0;if(r=i>=a,!r)return t;if(t===K())break;t=ae(t,!1)}return!1}function De(o,e,n,t){for(var i=0,a=0,r=o.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==p.ghost&&(t||r[a]!==p.dragged)&&Q(r[a],n.draggable,o,!1)){if(i===e)return r[a];i++}a++}return null}function It(o,e){for(var n=o.lastElementChild;n&&(n===p.ghost||h(n,"display")==="none"||e&&!$e(n,e));)n=n.previousElementSibling;return n||null}function L(o,e){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==p.clone&&(!e||$e(o,e))&&n++;return n}function Bt(o){var e=0,n=0,t=K();if(o)do{var i=we(o),a=i.a,r=i.d;e+=o.scrollLeft*a,n+=o.scrollTop*r}while(o!==t&&(o=o.parentNode));return[e,n]}function Jn(o,e){for(var n in o)if(o.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===o[n][t])return Number(n)}return-1}function ae(o,e){if(!o||!o.getBoundingClientRect)return K();var n=o,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=h(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return K();if(t||e)return n;t=!0}}while(n=n.parentNode);return K()}function $n(o,e){if(o&&e)for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function dt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var Ve;function tn(o,e){return function(){if(!Ve){var n=arguments,t=this;n.length===1?o.call(t,n[0]):o.apply(t,n),Ve=setTimeout(function(){Ve=void 0},e)}}}function eo(){clearTimeout(Ve),Ve=void 0}function nn(o,e,n){o.scrollLeft+=e,o.scrollTop+=n}function on(o){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}function rn(o,e,n){var t={};return Array.from(o.children).forEach(function(i){var a,r,l,s;if(!(!Q(i,e.draggable,o,!1)||i.animated||i===n)){var d=x(i);t.left=Math.min((a=t.left)!==null&&a!==void 0?a:1/0,d.left),t.top=Math.min((r=t.top)!==null&&r!==void 0?r:1/0,d.top),t.right=Math.max((l=t.right)!==null&&l!==void 0?l:-1/0,d.right),t.bottom=Math.max((s=t.bottom)!==null&&s!==void 0?s:-1/0,d.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var X="Sortable"+new Date().getTime();function to(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(i){if(!(h(i,"display")==="none"||i===p.ghost)){o.push({target:i,rect:x(i)});var a=Z({},o[o.length-1].rect);if(i.thisAnimationDuration){var r=we(i,!0);r&&(a.top-=r.f,a.left-=r.e)}i.fromRect=a}})}},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(Jn(o,{target:t}),1)},animateAll:function(t){var i=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var a=!1,r=0;o.forEach(function(l){var s=0,d=l.target,c=d.fromRect,f=x(d),g=d.prevFromRect,_=d.prevToRect,v=l.rect,b=we(d,!0);b&&(f.top-=b.f,f.left-=b.e),d.toRect=f,d.thisAnimationDuration&&dt(g,f)&&!dt(c,f)&&(v.top-f.top)/(v.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(s=oo(v,g,_,i.options)),dt(f,c)||(d.prevFromRect=c,d.prevToRect=f,s||(s=i.options.animation),i.animate(d,v,f,s)),s&&(a=!0,r=Math.max(r,s),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},s),d.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof t=="function"&&t()},r):typeof t=="function"&&t(),o=[]},animate:function(t,i,a,r){if(r){h(t,"transition",""),h(t,"transform","");var l=we(this.el),s=l&&l.a,d=l&&l.d,c=(i.left-a.left)/(s||1),f=(i.top-a.top)/(d||1);t.animatingX=!!c,t.animatingY=!!f,h(t,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=no(t),h(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),h(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){h(t,"transition",""),h(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},r)}}}}function no(o){return o.offsetWidth}function oo(o,e,n,t){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var me=[],ut={initializeByDefault:!0},Xe={mount:function(e){for(var n in ut)ut.hasOwnProperty(n)&&!(n in e)&&(e[n]=ut[n]);me.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),me.push(e)},pluginEvent:function(e,n,t){var i=this;this.eventCanceled=!1,t.cancel=function(){i.eventCanceled=!0};var a=e+"Global";me.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][a]&&n[r.pluginName][a](Z({sortable:n},t)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Z({sortable:n},t)))})},initializePlugins:function(e,n,t,i){me.forEach(function(l){var s=l.pluginName;if(!(!e.options[s]&&!l.initializeByDefault)){var d=new l(e,n,e.options);d.sortable=e,d.options=e.options,e[s]=d,ee(t,d.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var r=this.modifyOption(e,a,e.options[a]);typeof r<"u"&&(e.options[a]=r)}},getEventProperties:function(e,n){var t={};return me.forEach(function(i){typeof i.eventProperties=="function"&&ee(t,i.eventProperties.call(n[i.pluginName],e))}),t},modifyOption:function(e,n,t){var i;return me.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],t))}),i}};function io(o){var e=o.sortable,n=o.rootEl,t=o.name,i=o.targetEl,a=o.cloneEl,r=o.toEl,l=o.fromEl,s=o.oldIndex,d=o.newIndex,c=o.oldDraggableIndex,f=o.newDraggableIndex,g=o.originalEvent,_=o.putSortable,v=o.extraEventProperties;if(e=e||n&&n[X],!!e){var b,C=e.options,U="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!te&&!Be?b=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(t,!0,!0)),b.to=r||n,b.from=l||n,b.item=i||n,b.clone=a,b.oldIndex=s,b.newIndex=d,b.oldDraggableIndex=c,b.newDraggableIndex=f,b.originalEvent=g,b.pullMode=_?_.lastPutMode:void 0;var P=Z(Z({},v),Xe.getEventProperties(t,e));for(var H in P)b[H]=P[H];n&&n.dispatchEvent(b),C[U]&&C[U].call(e,b)}}var ro=["evt"],V=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.evt,a=qn(t,ro);Xe.pluginEvent.bind(p)(e,n,Z({dragEl:u,parentEl:O,ghostEl:m,rootEl:D,nextEl:he,lastDownEl:qe,cloneEl:I,cloneHidden:re,dragStarted:Ae,putSortable:M,activeSortable:p.active,originalEvent:i,oldIndex:Ee,oldDraggableIndex:Fe,newIndex:B,newDraggableIndex:ie,hideGhostForTarget:dn,unhideGhostForTarget:un,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(l){k({sortable:n,name:l,originalEvent:i})}},a))};function k(o){io(Z({putSortable:M,cloneEl:I,targetEl:u,rootEl:D,oldIndex:Ee,oldDraggableIndex:Fe,newIndex:B,newDraggableIndex:ie},o))}var u,O,m,D,he,qe,I,re,Ee,B,Fe,ie,He,M,be=!1,et=!1,tt=[],ce,W,ct,ft,Xt,Lt,Ae,ge,Re,Ye=!1,We=!1,Ke,N,ht=[],Et=!1,nt=[],lt=typeof document<"u",ze=Zt,Ut=Be||te?"cssFloat":"float",ao=lt&&!Jt&&!Zt&&"draggable"in document.createElement("div"),an=function(){if(lt){if(te)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),ln=function(e,n){var t=h(e),i=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),a=De(e,0,n),r=De(e,1,n),l=a&&h(a),s=r&&h(r),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+x(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+x(r).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var f=l.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=i&&t[Ut]==="none"||r&&t[Ut]==="none"&&d+c>i)?"vertical":"horizontal"},lo=function(e,n,t){var i=t?e.left:e.top,a=t?e.right:e.bottom,r=t?e.width:e.height,l=t?n.left:n.top,s=t?n.right:n.bottom,d=t?n.width:n.height;return i===l||a===s||i+r/2===l+d/2},so=function(e,n){var t;return tt.some(function(i){var a=i[X].options.emptyInsertThreshold;if(!(!a||It(i))){var r=x(i),l=e>=r.left-a&&e<=r.right+a,s=n>=r.top-a&&n<=r.bottom+a;if(l&&s)return t=i}}),t},sn=function(e){function n(a,r){return function(l,s,d,c){var f=l.options.group.name&&s.options.group.name&&l.options.group.name===s.options.group.name;if(a==null&&(r||f))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return n(a(l,s,d,c),r)(l,s,d,c);var g=(r?l:s).options.group.name;return a===!0||typeof a=="string"&&a===g||a.join&&a.indexOf(g)>-1}}var t={},i=e.group;(!i||Ge(i)!="object")&&(i={name:i}),t.name=i.name,t.checkPull=n(i.pull,!0),t.checkPut=n(i.put),t.revertClone=i.revertClone,e.group=t},dn=function(){!an&&m&&h(m,"display","none")},un=function(){!an&&m&&h(m,"display","")};lt&&!Jt&&document.addEventListener("click",function(o){if(et)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),et=!1,!1},!0);var fe=function(e){if(u){e=e.touches?e.touches[0]:e;var n=so(e.clientX,e.clientY);if(n){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[X]._onDragOver(t)}}},uo=function(e){u&&u.parentNode[X]._isOutsideThisEl(e.target)};function p(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=ee({},e),o[X]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ln(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,l){r.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&!ke,emptyInsertThreshold:5};Xe.initializePlugins(this,o,n);for(var t in n)!(t in e)&&(e[t]=n[t]);sn(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:ao,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(o,"pointerdown",this._onTapStart):(S(o,"mousedown",this._onTapStart),S(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(o,"dragover",this),S(o,"dragenter",this)),tt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ee(this,to())}p.prototype={constructor:p,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ge=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,u):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,i=this.options,a=i.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=i.filter;if(bo(t),!u&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ke&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Q(s,i.draggable,t,!1),!(s&&s.animated)&&qe!==s)){if(Ee=L(s),Fe=L(s,i.draggable),typeof c=="function"){if(c.call(this,e,s,this)){k({sortable:n,rootEl:d,name:"filter",targetEl:s,toEl:t,fromEl:t}),V("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=Q(d,f.trim(),t,!1),f)return k({sortable:n,rootEl:f,name:"filter",targetEl:s,fromEl:t,toEl:t}),V("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!Q(d,i.handle,t,!1)||this._prepareDragStart(e,l,s)}}},_prepareDragStart:function(e,n,t){var i=this,a=i.el,r=i.options,l=a.ownerDocument,s;if(t&&!u&&t.parentNode===a){var d=x(t);if(D=a,u=t,O=u.parentNode,he=u.nextSibling,qe=t,He=r.group,p.dragged=u,ce={target:u,clientX:(n||e).clientX,clientY:(n||e).clientY},Xt=ce.clientX-d.left,Lt=ce.clientY-d.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,u.style["will-change"]="all",s=function(){if(V("delayEnded",i,{evt:e}),p.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ft&&i.nativeDraggable&&(u.draggable=!0),i._triggerDragStart(e,n),k({sortable:i,name:"choose",originalEvent:e}),Y(u,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){en(u,c.trim(),pt)}),S(l,"dragover",fe),S(l,"mousemove",fe),S(l,"touchmove",fe),S(l,"mouseup",i._onDrop),S(l,"touchend",i._onDrop),S(l,"touchcancel",i._onDrop),Ft&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=!0),V("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Be||te))){if(p.eventCanceled){this._onDrop();return}S(l,"mouseup",i._disableDelayedDrag),S(l,"touchend",i._disableDelayedDrag),S(l,"touchcancel",i._disableDelayedDrag),S(l,"mousemove",i._delayedDragTouchMoveHandler),S(l,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&S(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&pt(u),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):n?S(document,"touchmove",this._onTouchMove):S(document,"mousemove",this._onTouchMove):(S(u,"dragend",this),S(D,"dragstart",this._onDragStart));try{document.selection?Ze(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(be=!1,D&&u){V("dragStarted",this,{evt:n}),this.nativeDraggable&&S(document,"dragover",uo);var t=this.options;!e&&Y(u,t.dragClass,!1),Y(u,t.ghostClass,!0),p.active=this,e&&this._appendGhost(),k({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(W){this._lastX=W.clientX,this._lastY=W.clientY,dn();for(var e=document.elementFromPoint(W.clientX,W.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(W.clientX,W.clientY),e!==n);)n=e;if(u.parentNode[X]._isOutsideThisEl(e),n)do{if(n[X]){var t=void 0;if(t=n[X]._onDragOver({clientX:W.clientX,clientY:W.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);un()}},_onTouchMove:function(e){if(ce){var n=this.options,t=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,r=m&&we(m,!0),l=m&&r&&r.a,s=m&&r&&r.d,d=ze&&N&&Bt(N),c=(a.clientX-ce.clientX+i.x)/(l||1)+(d?d[0]-ht[0]:0)/(l||1),f=(a.clientY-ce.clientY+i.y)/(s||1)+(d?d[1]-ht[1]:0)/(s||1);if(!p.active&&!be){if(t&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(m){r?(r.e+=c-(ct||0),r.f+=f-(ft||0)):r={a:1,b:0,c:0,d:1,e:c,f};var g="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");h(m,"webkitTransform",g),h(m,"mozTransform",g),h(m,"msTransform",g),h(m,"transform",g),ct=c,ft=f,W=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!m){var e=this.options.fallbackOnBody?document.body:D,n=x(u,!0,ze,!0,e),t=this.options;if(ze){for(N=e;h(N,"position")==="static"&&h(N,"transform")==="none"&&N!==document;)N=N.parentNode;N!==document.body&&N!==document.documentElement?(N===document&&(N=K()),n.top+=N.scrollTop,n.left+=N.scrollLeft):N=K(),ht=Bt(N)}m=u.cloneNode(!0),Y(m,t.ghostClass,!1),Y(m,t.fallbackClass,!0),Y(m,t.dragClass,!0),h(m,"transition",""),h(m,"transform",""),h(m,"box-sizing","border-box"),h(m,"margin",0),h(m,"top",n.top),h(m,"left",n.left),h(m,"width",n.width),h(m,"height",n.height),h(m,"opacity","0.8"),h(m,"position",ze?"absolute":"fixed"),h(m,"zIndex","100000"),h(m,"pointerEvents","none"),p.ghost=m,e.appendChild(m),h(m,"transform-origin",Xt/parseInt(m.style.width)*100+"% "+Lt/parseInt(m.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,i=e.dataTransfer,a=t.options;if(V("dragStart",this,{evt:e}),p.eventCanceled){this._onDrop();return}V("setupClone",this),p.eventCanceled||(I=on(u),I.removeAttribute("id"),I.draggable=!1,I.style["will-change"]="",this._hideClone(),Y(I,this.options.chosenClass,!1),p.clone=I),t.cloneId=Ze(function(){V("clone",t),!p.eventCanceled&&(t.options.removeCloneOnHide||D.insertBefore(I,u),t._hideClone(),k({sortable:t,name:"clone"}))}),!n&&Y(u,a.dragClass,!0),n?(et=!0,t._loopId=setInterval(t._emulateDragOver,50)):(w(document,"mouseup",t._onDrop),w(document,"touchend",t._onDrop),w(document,"touchcancel",t._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(t,i,u)),S(document,"drop",t),h(u,"transform","translateZ(0)")),be=!0,t._dragStartId=Ze(t._dragStarted.bind(t,n,e)),S(document,"selectstart",t),Ae=!0,ke&&h(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,i,a,r,l=this.options,s=l.group,d=p.active,c=He===s,f=l.sort,g=M||d,_,v=this,b=!1;if(Et)return;function C(xe,fn){V(xe,v,Z({evt:e,isOwner:c,axis:_?"vertical":"horizontal",revert:r,dragRect:i,targetRect:a,canSort:f,fromSortable:g,target:t,completed:P,onMove:function(xt,hn){return Qe(D,n,u,i,xt,x(xt),e,hn)},changed:H},fn))}function U(){C("dragOverAnimationCapture"),v.captureAnimationState(),v!==g&&g.captureAnimationState()}function P(xe){return C("dragOverCompleted",{insertion:xe}),xe&&(c?d._hideClone():d._showClone(v),v!==g&&(Y(u,M?M.options.ghostClass:d.options.ghostClass,!1),Y(u,l.ghostClass,!0)),M!==v&&v!==p.active?M=v:v===p.active&&M&&(M=null),g===v&&(v._ignoreWhileAnimating=t),v.animateAll(function(){C("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(t===u&&!u.animated||t===n&&!t.animated)&&(ge=null),!l.dragoverBubble&&!e.rootEl&&t!==document&&(u.parentNode[X]._isOutsideThisEl(e.target),!xe&&fe(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function H(){B=L(u),ie=L(u,l.draggable),k({sortable:v,name:"change",toEl:n,newIndex:B,newDraggableIndex:ie,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Q(t,l.draggable,n,!0),C("dragOver"),p.eventCanceled)return b;if(u.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||v._ignoreWhileAnimating===t)return P(!1);if(et=!1,d&&!l.disabled&&(c?f||(r=O!==D):M===this||(this.lastPutMode=He.checkPull(this,d,u,e))&&s.checkPut(this,d,u,e))){if(_=this._getDirection(e,t)==="vertical",i=x(u),C("dragOverValid"),p.eventCanceled)return b;if(r)return O=D,U(),this._hideClone(),C("revert"),p.eventCanceled||(he?D.insertBefore(u,he):D.appendChild(u)),P(!0);var F=It(n,l.draggable);if(!F||po(e,_,this)&&!F.animated){if(F===u)return P(!1);if(F&&n===e.target&&(t=F),t&&(a=x(t)),Qe(D,n,u,i,t,a,e,!!t)!==!1)return U(),F&&F.nextSibling?n.insertBefore(u,F.nextSibling):n.appendChild(u),O=n,H(),P(!0)}else if(F&&ho(e,_,this)){var se=De(n,0,l,!0);if(se===u)return P(!1);if(t=se,a=x(t),Qe(D,n,u,i,t,a,e,!1)!==!1)return U(),n.insertBefore(u,se),O=n,H(),P(!0)}else if(t.parentNode===n){a=x(t);var q=0,de,Ce=u.parentNode!==n,R=!lo(u.animated&&u.toRect||i,t.animated&&t.toRect||a,_),Ie=_?"top":"left",ne=Yt(t,"top","top")||Yt(u,"top","top"),Oe=ne?ne.scrollTop:void 0;ge!==t&&(de=a[Ie],Ye=!1,We=!R&&l.invertSwap||Ce),q=mo(e,t,a,_,R?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,We,ge===t);var J;if(q!==0){var ue=L(u);do ue-=q,J=O.children[ue];while(J&&(h(J,"display")==="none"||J===m))}if(q===0||J===t)return P(!1);ge=t,Re=q;var Te=t.nextElementSibling,oe=!1;oe=q===1;var Le=Qe(D,n,u,i,t,a,e,oe);if(Le!==!1)return(Le===1||Le===-1)&&(oe=Le===1),Et=!0,setTimeout(fo,30),U(),oe&&!Te?n.appendChild(u):t.parentNode.insertBefore(u,oe?Te:t),ne&&nn(ne,0,Oe-ne.scrollTop),O=u.parentNode,de!==void 0&&!We&&(Ke=Math.abs(de-x(t)[Ie])),H(),P(!0)}if(n.contains(u))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",fe),w(document,"mousemove",fe),w(document,"touchmove",fe)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(B=L(u),ie=L(u,t.draggable),V("drop",this,{evt:e}),O=u&&u.parentNode,B=L(u),ie=L(u,t.draggable),p.eventCanceled){this._nulling();return}be=!1,We=!1,Ye=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wt(this.cloneId),wt(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ke&&h(document.body,"user-select",""),h(u,"transform",""),e&&(Ae&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),m&&m.parentNode&&m.parentNode.removeChild(m),(D===O||M&&M.lastPutMode!=="clone")&&I&&I.parentNode&&I.parentNode.removeChild(I),u&&(this.nativeDraggable&&w(u,"dragend",this),pt(u),u.style["will-change"]="",Ae&&!be&&Y(u,M?M.options.ghostClass:this.options.ghostClass,!1),Y(u,this.options.chosenClass,!1),k({sortable:this,name:"unchoose",toEl:O,newIndex:null,newDraggableIndex:null,originalEvent:e}),D!==O?(B>=0&&(k({rootEl:O,name:"add",toEl:O,fromEl:D,originalEvent:e}),k({sortable:this,name:"remove",toEl:O,originalEvent:e}),k({rootEl:O,name:"sort",toEl:O,fromEl:D,originalEvent:e}),k({sortable:this,name:"sort",toEl:O,originalEvent:e})),M&&M.save()):B!==Ee&&B>=0&&(k({sortable:this,name:"update",toEl:O,originalEvent:e}),k({sortable:this,name:"sort",toEl:O,originalEvent:e})),p.active&&((B==null||B===-1)&&(B=Ee,ie=Fe),k({sortable:this,name:"end",toEl:O,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){V("nulling",this),D=u=O=m=he=I=qe=re=ce=W=Ae=B=ie=Ee=Fe=ge=Re=M=He=p.dragged=p.ghost=p.clone=p.active=null,nt.forEach(function(e){e.checked=!0}),nt.length=ct=ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":u&&(this._onDragOver(e),co(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,i=0,a=t.length,r=this.options;i<a;i++)n=t[i],Q(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||vo(n));return e},sort:function(e,n){var t={},i=this.el;this.toArray().forEach(function(a,r){var l=i.children[r];Q(l,this.options.draggable,i,!1)&&(t[a]=l)},this),n&&this.captureAnimationState(),e.forEach(function(a){t[a]&&(i.removeChild(t[a]),i.appendChild(t[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Q(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var i=Xe.modifyOption(this,e,n);typeof i<"u"?t[e]=i:t[e]=n,e==="group"&&sn(t)},destroy:function(){V("destroy",this);var e=this.el;e[X]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),tt.splice(tt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(V("hideClone",this),p.eventCanceled)return;h(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),re=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(re){if(V("showClone",this),p.eventCanceled)return;u.parentNode==D&&!this.options.group.revertClone?D.insertBefore(I,u):he?D.insertBefore(I,he):D.appendChild(I),this.options.group.revertClone&&this.animate(u,I),h(I,"display",""),re=!1}}};function co(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function Qe(o,e,n,t,i,a,r,l){var s,d=o[X],c=d.options.onMove,f;return window.CustomEvent&&!te&&!Be?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=o,s.dragged=n,s.draggedRect=t,s.related=i||e,s.relatedRect=a||x(e),s.willInsertAfter=l,s.originalEvent=r,o.dispatchEvent(s),c&&(f=c.call(d,s,r)),f}function pt(o){o.draggable=!1}function fo(){Et=!1}function ho(o,e,n){var t=x(De(n.el,0,n.options,!0)),i=rn(n.el,n.options,m),a=10;return e?o.clientX<i.left-a||o.clientY<t.top&&o.clientX<t.right:o.clientY<i.top-a||o.clientY<t.bottom&&o.clientX<t.left}function po(o,e,n){var t=x(It(n.el,n.options.draggable)),i=rn(n.el,n.options,m),a=10;return e?o.clientX>i.right+a||o.clientY>t.bottom&&o.clientX>t.left:o.clientY>i.bottom+a||o.clientX>t.right&&o.clientY>t.top}function mo(o,e,n,t,i,a,r,l){var s=t?o.clientY:o.clientX,d=t?n.height:n.width,c=t?n.top:n.left,f=t?n.bottom:n.right,g=!1;if(!r){if(l&&Ke<d*i){if(!Ye&&(Re===1?s>c+d*a/2:s<f-d*a/2)&&(Ye=!0),Ye)g=!0;else if(Re===1?s<c+Ke:s>f-Ke)return-Re}else if(s>c+d*(1-i)/2&&s<f-d*(1-i)/2)return go(e)}return g=g||r,g&&(s<c+d*a/2||s>f-d*a/2)?s>c+d/2?1:-1:0}function go(o){return L(u)<L(o)?1:-1}function vo(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function bo(o){nt.length=0;for(var e=o.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&nt.push(t)}}function Ze(o){return setTimeout(o,0)}function wt(o){return clearTimeout(o)}lt&&S(document,"touchmove",function(o){(p.active||be)&&o.cancelable&&o.preventDefault()});p.utils={on:S,off:w,css:h,find:en,is:function(e,n){return!!Q(e,n,e,!1)},extend:$n,throttle:tn,closest:Q,toggleClass:Y,clone:on,index:L,nextTick:Ze,cancelNextTick:wt,detectDirection:ln,getChild:De};p.get=function(o){return o[X]};p.mount=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(p.utils=Z(Z({},p.utils),t.utils)),Xe.mount(t)})};p.create=function(o,e){return new p(o,e)};p.version=Kn;var T=[],Pe,St,Dt=!1,mt,gt,ot,Me;function yo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):t.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),Ht(),Je(),eo()},nulling:function(){ot=St=Pe=Dt=Me=mt=gt=null,T.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var i=this,a=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(a,r);if(ot=n,t||this.options.forceAutoScrollFallback||Be||te||ke){vt(n,this.options,l,t);var s=ae(l,!0);Dt&&(!Me||a!==mt||r!==gt)&&(Me&&Ht(),Me=setInterval(function(){var d=ae(document.elementFromPoint(a,r),!0);d!==s&&(s=d,Je()),vt(n,i.options,d,t)},10),mt=a,gt=r)}else{if(!this.options.bubbleScroll||ae(l,!0)===K()){Je();return}vt(n,this.options,ae(l,!1),!1)}}},ee(o,{pluginName:"scroll",initializeByDefault:!0})}function Je(){T.forEach(function(o){clearInterval(o.pid)}),T=[]}function Ht(){clearInterval(Me)}var vt=tn(function(o,e,n,t){if(e.scroll){var i=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,s=K(),d=!1,c;St!==n&&(St=n,Je(),Pe=e.scroll,c=e.scrollFn,Pe===!0&&(Pe=ae(n,!0)));var f=0,g=Pe;do{var _=g,v=x(_),b=v.top,C=v.bottom,U=v.left,P=v.right,H=v.width,F=v.height,se=void 0,q=void 0,de=_.scrollWidth,Ce=_.scrollHeight,R=h(_),Ie=_.scrollLeft,ne=_.scrollTop;_===s?(se=H<de&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),q=F<Ce&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(se=H<de&&(R.overflowX==="auto"||R.overflowX==="scroll"),q=F<Ce&&(R.overflowY==="auto"||R.overflowY==="scroll"));var Oe=se&&(Math.abs(P-i)<=r&&Ie+H<de)-(Math.abs(U-i)<=r&&!!Ie),J=q&&(Math.abs(C-a)<=r&&ne+F<Ce)-(Math.abs(b-a)<=r&&!!ne);if(!T[f])for(var ue=0;ue<=f;ue++)T[ue]||(T[ue]={});(T[f].vx!=Oe||T[f].vy!=J||T[f].el!==_)&&(T[f].el=_,T[f].vx=Oe,T[f].vy=J,clearInterval(T[f].pid),(Oe!=0||J!=0)&&(d=!0,T[f].pid=setInterval((function(){t&&this.layer===0&&p.active._onTouchMove(ot);var Te=T[this.layer].vy?T[this.layer].vy*l:0,oe=T[this.layer].vx?T[this.layer].vx*l:0;typeof c=="function"&&c.call(p.dragged.parentNode[X],oe,Te,o,ot,T[this.layer].el)!=="continue"||nn(T[this.layer].el,oe,Te)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&g!==s&&(g=ae(g,!1)));Dt=d}},30),cn=function(e){var n=e.originalEvent,t=e.putSortable,i=e.dragEl,a=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var d=t||a;l();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);s(),d&&!d.el.contains(f)&&(r("spill"),this.onSpill({dragEl:i,putSortable:t}))}};function Ot(){}Ot.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var i=De(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:cn};ee(Ot,{pluginName:"revertOnSpill"});function Tt(){}Tt.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,i=t||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:cn};ee(Tt,{pluginName:"removeOnSpill"});p.mount(new yo);p.mount(Tt,Ot);function _o(o,e,n={}){let t;const{document:i=En,...a}=n,r={onUpdate:c=>{Eo(e,c.oldIndex,c.newIndex)}},l=()=>{const c=typeof o=="string"?i?.querySelector(o):_n(o);!c||t!==void 0||(t=new p(c,{...r,...a}))},s=()=>{t?.destroy(),t=void 0},d=(c,f)=>{if(f!==void 0)t?.option(c,f);else return t?.option(c)};return bn(l),yn(s),{stop:s,start:l,option:d}}function Eo(o,e,n){const t=wn(o),i=t?[...At(o)]:At(o);if(n>=0&&n<i.length){const a=i.splice(e,1)[0];Sn(()=>{i.splice(n,0,a),t&&(o.value=i)})}}const wo=it({__name:"viewItems",props:{modelValue:{required:!1,default:[]},modelModifiers:{}},emits:Se(["onChange","onEditMode"],["update:modelValue"]),setup(o,{expose:e,emit:n}){e();const t=rt(o,"modelValue"),i=n,{t:a}=Wt({useScope:"global"}),r=pe(null),l=pe([]),s=pe(Object.fromEntries(t.value?.map(c=>[`${c.name}${c.type}`,!1])??[]));_o(r,l,{handle:".dragAndDrop",draggable:".draggable",animation:200,onUpdate(){}}),Ct(()=>{zt(t,()=>{l.value=t.value.toSorted((c,f)=>Number(c.checkbox)-Number(f.checkbox))},{immediate:!0})});const d={model:t,emit:i,t:a,itemListRef:r,sortedItems:l,expanded:s,get ionColorWandOutline(){return Dn},get ionEllipsisVerticalOutline(){return Cn}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),So={key:0,style:{width:"20px"}},Do={key:1,class:"cursor-pointer"},Co={key:0,style:{width:"20px"}},Io={key:1,class:"cursor-pointer"};function Oo(o,e,n,t,i,a){return A(),z(_e,null,[y(Gt,null,{default:E(()=>[y(Pt,{ref:"itemListRef"},{default:E(()=>[y(In,{name:"list"},{default:E(()=>[(A(!0),z(_e,null,yt(t.sortedItems,r=>(A(),z(_e,{key:r.name+r.type},[r.recipes?.length?(A(),le(Nn,{key:0,class:st(r.checkbox?"":"draggable"),modelValue:t.expanded[r.name+r.type],"onUpdate:modelValue":l=>t.expanded[r.name+r.type]=l,icon:"perm_identity","expand-icon-toggle":"",dense:""},{header:E(()=>[y(ve,{side:"",class:"dragAndDrop"},{default:E(()=>[r.checkbox?(A(),z("span",So)):(A(),z("span",Do,[y(Ue,{name:t.ionEllipsisVerticalOutline},null,8,["name"]),y(Ue,{name:t.ionEllipsisVerticalOutline,style:{"margin-left":"-9px"}},null,8,["name"])]))]),_:2},1024),y(ve,null,{default:E(()=>[y(kt,{modelValue:r.checkbox,"onUpdate:modelValue":[l=>r.checkbox=l,e[0]||(e[0]=l=>t.emit("onChange",t.sortedItems))],"toggle-indeterminate":!1},{default:E(()=>[y(je,{class:st(r.checkbox?"text-strike":"")},{default:E(()=>[j(G(`${r?.name} - ${r?.number} ${t.t(`ingredients.type.${r?.type}`)}`),1)]),_:2},1032,["class"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),default:E(()=>[y(Pt,{dense:""},{default:E(()=>[(A(!0),z(_e,null,yt(r.recipes,l=>(A(),le(bt,{key:l.id},{default:E(()=>[y(ve,{class:"q-pl-xl text-subtitle2"},{default:E(()=>[y(je,{caption:""},{default:E(()=>[j(G(l.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["class","modelValue","onUpdate:modelValue"])):(A(),le(bt,{key:1},{default:E(()=>[y(ve,{side:"",class:"dragAndDrop"},{default:E(()=>[r.checkbox?(A(),z("span",Co)):(A(),z("span",Io,[y(Ue,{name:t.ionEllipsisVerticalOutline},null,8,["name"]),y(Ue,{name:t.ionEllipsisVerticalOutline,style:{"margin-left":"-9px"}},null,8,["name"])]))]),_:2},1024),y(ve,null,{default:E(()=>[y(kt,{modelValue:r.checkbox,"onUpdate:modelValue":[l=>r.checkbox=l,e[1]||(e[1]=l=>t.emit("onChange",t.sortedItems))],"toggle-indeterminate":!1},{default:E(()=>[y(je,{class:st(r.checkbox?"text-strike":"")},{default:E(()=>[j(G(`${r?.name} - ${r?.number} ${t.t(`ingredients.type.${r?.type}`)}`),1)]),_:2},1032,["class"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))],64))),128))]),_:1})]),_:1},512)]),_:1}),y(qt,null,{default:E(()=>[y(jt),y(Ne,{icon:t.ionColorWandOutline,onClick:e[2]||(e[2]=r=>t.emit("onEditMode")),color:"primary"},{default:E(()=>[j(G(t.model.length?o.$t("change"):o.$t("add")),1)]),_:1},8,["icon"])]),_:1})],64)}const To=at(wo,[["render",Oo],["__scopeId","data-v-e025dd81"],["__file","viewItems.vue"]]),xo=it({__name:"editableItems",props:Se({createMode:{type:Boolean}},{modelValue:{required:!1,default:[]},modelModifiers:{}}),emits:Se(["onChange"],["update:modelValue"]),setup(o,{expose:e,emit:n}){const t=rt(o,"modelValue"),i=o,a=n,r=pe(i.createMode),l=pe(null);e({submit:()=>l?.value?.submit?.()});function s(c,f){a("onChange",c,()=>{f?.(),r.value=!1})}const d={model:t,props:i,emit:a,isEditMode:r,editItemsRef:l,onFinishUpdate:s,EditItems:Qn,ViewItems:To};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function Ao(o,e,n,t,i,a){return A(),z(_e,null,[t.isEditMode?_t("",!0):(A(),le(t.ViewItems,{key:0,modelValue:t.model,"onUpdate:modelValue":e[0]||(e[0]=r=>t.model=r),onOnEditMode:e[1]||(e[1]=r=>t.isEditMode=!0),onOnChange:e[2]||(e[2]=(r,l)=>t.emit("onChange",r,l))},null,8,["modelValue"])),t.isEditMode?(A(),le(t.EditItems,{key:1,ref:"editItemsRef",modelValue:t.model,"onUpdate:modelValue":e[3]||(e[3]=r=>t.model=r),onOnChange:t.onFinishUpdate,"create-mode":t.props.createMode,onOnEditMode:e[4]||(e[4]=r=>t.isEditMode=!1)},null,8,["modelValue","create-mode"])):_t("",!0)],64)}const Wo=at(xo,[["render",Ao],["__file","editableItems.vue"]]);export{Wo as E};
