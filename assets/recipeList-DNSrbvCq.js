import{a as Z,F as W,Q as le}from"./QCardActions-CLJaF5Bu.js";import{R as O,x as te,z as oe,b6 as ie,B as ne,C as re,b7 as se,I as y,J as I,b8 as U,a3 as G,am as de,T as ce,v as E,U as K,V as $,b9 as ue,aX as me,Y as N,Z as f,ag as x,a1 as o,a0 as t,a4 as Q,a5 as S,aj as B,av as q,L as fe,ay as pe,N as ge,aA as ve,ba as H,aC as he,bb as _e,b1 as be,$ as z,a7 as J,ar as X,as as Y}from"./index-CmuCMgBa.js";import{Q as ye}from"./QSkeleton-BJfC7NnZ.js";import{P as ke,Q as we}from"./paginationPageSize-D7MNSaKA.js";import{Q as Se}from"./QPage-Blsos2c0.js";import{R as Re}from"./recipe.service-B2BkU8jg.js";import{u as D,s as Ce,S as xe}from"./searchFilter-B46quSSD.js";import{L as Oe}from"./listItem-DaZeiiGx.js";import{R as qe}from"./recipeItemActions-DR6360ev.js";import{Q as V}from"./QCardSection-NG0FHRHY.js";import{a as Ve,c as Qe,Q as Fe}from"./QInput-Lm2QrpE2.js";import{o as Te,u as Ie}from"./QCheckbox-WeQmrjpL.js";import{Q as ze}from"./QForm-BI170nwI.js";import{Q as j}from"./QCard-C4N2OtfF.js";import{Q as Me,a as A}from"./QTr-oK-54oaG.js";import{Q as Pe}from"./QTable-8EEMW2-E.js";import{c as ee,Q as Ae}from"./QSelect-B1fV5hfF.js";import{f as ae}from"./format-Dq9uPdyY.js";import{V as Le}from"./validation.service-Bh9qf873.js";import{F as Be}from"./folder.service-3sR9fq5W.js";import{S as De}from"./searchAutocomplete-DxeGRu9i.js";import"./QBtnDropdown-BGAbgpwa.js";import"./ClosePopup-Bnjv8jFB.js";import"./QImg-BWxTlY2N.js";import"./index-BkI8a_iM.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./QSeparator-BZj1x5fP.js";import"./use-fullscreen-D4Edpx92.js";import"./History-BRlARYUr.js";import"./is-BddHB8T5.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./rtl-DFPa-2ov.js";const Ue=O("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[O("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),O("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),L=te({name:"QRadio",props:{...oe,...ie,...Ve,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(a,{slots:i,emit:c}){const{proxy:e}=ne(),g=re(a,e.$q),m=se(a,Te),l=y(null),{refocusTargetEl:s,refocusTarget:p}=Ie(a,l),d=I(()=>U(a.modelValue)===U(a.val)),v=I(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(a.disable===!0?" disabled":"")+(g.value===!0?" q-radio--dark":"")+(a.dense===!0?" q-radio--dense":"")+(a.leftLabel===!0?" reverse":"")),h=I(()=>{const n=a.color!==void 0&&(a.keepColor===!0||d.value===!0)?` text-${a.color}`:"";return`q-radio__inner relative-position q-radio__inner--${d.value===!0?"truthy":"falsy"}${n}`}),k=I(()=>(d.value===!0?a.checkedIcon:a.uncheckedIcon)||null),u=I(()=>a.disable===!0?-1:a.tabindex||0),R=I(()=>{const n={type:"radio"};return a.name!==void 0&&Object.assign(n,{".checked":d.value===!0,"^checked":d.value===!0?"checked":void 0,name:a.name,value:a.val}),n}),M=Qe(R);function w(n){n!==void 0&&(E(n),p(n)),a.disable!==!0&&d.value!==!0&&c("update:modelValue",a.val,n)}function F(n){(n.keyCode===13||n.keyCode===32)&&E(n)}function C(n){(n.keyCode===13||n.keyCode===32)&&w(n)}return Object.assign(e,{set:w}),()=>{const n=k.value!==null?[O("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[O(G,{class:"q-radio__icon",name:k.value})])]:[Ue];a.disable!==!0&&M(n,"unshift"," q-radio__native q-ma-none q-pa-none");const T=[O("div",{class:h.value,style:m.value,"aria-hidden":"true"},n)];s.value!==null&&T.push(s.value);const r=a.label!==void 0?de(i.default,[a.label]):ce(i.default);return r!==void 0&&T.push(O("div",{class:"q-radio__label q-anchor--skip"},r)),O("div",{ref:l,class:v.value,tabindex:u.value,role:"radio","aria-label":a.label,"aria-checked":d.value===!0?"true":"false","aria-disabled":a.disable===!0?"true":void 0,onClick:w,onKeydown:F,onKeyup:C},T)}}}),je=K({__name:"sharingModal",props:{sharedWith:{}},emits:D.emits,setup(a,{expose:i}){i();const c=a,{capitalize:e}=ae,{dialogRef:g,onDialogOK:m,onDialogCancel:l}=D(),{email:s}=Le(),{t:p}=$({useScope:"global"}),d=y("Read"),v=y(""),h=y(),k=y({rowsPerPage:0}),u=[{name:"index",label:"#",field:"index",align:"center"},{name:"email",label:e(p("sharing.email")),field:"email",align:"center"},{name:"access",label:e(p("sharing.access")),field:"access",align:"center"},{name:"delete",label:e(p("sharing.delete")),field:"delete",align:"center"}],R=y(structuredClone(U(c.sharedWith??[])));function M(C){R.value.splice(C,1)}function w(){if(h?.value?.validate(),h?.value?.hasError)return;const C={email:v.value,type:d.value};R.value.push(C),v.value="",d.value="Read"}const F={props:c,capitalize:e,dialogRef:g,onDialogOK:m,onDialogCancel:l,emailRule:s,t:p,type:d,email:v,emailRef:h,pagination:k,columns:u,rows:R,deleteItem:M,addItem:w,get ionMailOutline(){return ue},get ionTrashOutline(){return me}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),Ke={class:"column"},Ne={class:"column"};function We(a,i,c,e,g,m){return f(),x(ee,{ref:"dialogRef",maximized:""},{default:o(()=>[t(j,{class:"q-dialog-plugin column justify-between",style:{"max-width":"1024px","max-height":"90%"}},{default:o(()=>[t(V,{class:"text-h5 text-capitalize"},{default:o(()=>[Q(S(a.$t("sharing.title")),1)]),_:1}),t(V,null,{default:o(()=>[t(j,null,{default:o(()=>[t(V,{class:"text-h5"},{default:o(()=>[Q(S(a.$t("sharing.newUserTitle")),1)]),_:1}),t(V,null,{default:o(()=>[t(ze,{onSubmit:e.addItem},{default:o(()=>[t(Fe,{ref:"emailRef","lazy-rules":"",filled:"",modelValue:e.email,"onUpdate:modelValue":i[0]||(i[0]=l=>e.email=l),label:e.capitalize(e.t("sharing.email")),rules:[e.emailRule]},{prepend:o(()=>[t(G,{name:e.ionMailOutline},null,8,["name"])]),_:1},8,["modelValue","label","rules"]),B("div",Ke,[t(L,{modelValue:e.type,"onUpdate:modelValue":i[1]||(i[1]=l=>e.type=l),val:"Read",label:e.capitalize(a.$t("sharing.read"))},null,8,["modelValue","label"]),t(L,{modelValue:e.type,"onUpdate:modelValue":i[2]||(i[2]=l=>e.type=l),val:"Write",label:e.capitalize(a.$t("sharing.write"))},null,8,["modelValue","label"])]),t(q,{label:e.capitalize(a.$t("add")),type:"submit",color:"primary",class:"q-mt-md"},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(Pe,{flat:"",bordered:"","row-key":"index",title:a.$t("sharing.tableTitle"),"virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":i[3]||(i[3]=l=>e.pagination=l),ref:"tableRef",rows:e.rows,columns:e.columns},{body:o(l=>[(f(),x(Me,{props:l,key:`m_${l.row.index}`},{default:o(()=>[(f(),x(A,{"auto-width":"",key:e.columns[0].name,props:l},{default:o(()=>[Q(S(l.rowIndex+1),1)]),_:2},1032,["props"])),(f(),x(A,{"auto-width":"",key:e.columns[1].name,props:l},{default:o(()=>[Q(S(l.row.email),1)]),_:2},1032,["props"])),(f(),x(A,{"auto-width":"",key:e.columns[2].name,props:l},{default:o(()=>[B("div",Ne,[t(L,{modelValue:l.row.type,"onUpdate:modelValue":s=>l.row.type=s,val:"Read",label:e.capitalize(a.$t("sharing.read"))},null,8,["modelValue","onUpdate:modelValue","label"]),t(L,{modelValue:l.row.type,"onUpdate:modelValue":s=>l.row.type=s,val:"Write",label:e.capitalize(a.$t("sharing.write"))},null,8,["modelValue","onUpdate:modelValue","label"])])]),_:2},1032,["props"])),(f(),x(A,{"auto-width":"",key:e.columns[1].name,props:l},{default:o(()=>[t(q,{round:"",flat:"",icon:e.ionTrashOutline,onClick:s=>e.deleteItem(l.rowIndex),color:"secondary"},null,8,["icon","onClick"])]),_:2},1032,["props"]))]),_:2},1032,["props"]))]),_:1},8,["title","pagination","rows"])]),_:1}),t(Z,{align:"right",class:"q-pa-md"},{default:o(()=>[t(q,{label:a.$t("cancel"),onClick:e.onDialogCancel},null,8,["label","onClick"]),t(q,{color:"primary",label:a.$t("save"),type:"submit",onClick:i[4]||(i[4]=l=>e.onDialogOK(e.rows))},null,8,["label"])]),_:1})]),_:1})]),_:1},512)}const Ee=N(je,[["render",We],["__file","sharingModal.vue"]]),He=K({__name:"addToFolder",props:{folders:{}},emits:D.emits,setup(a,{expose:i}){i();const c=a,{capitalize:e}=ae,{dialogRef:g,onDialogOK:m,onDialogCancel:l}=D(),{folderAutocomplete:s,getFolders:p}=Be(),d=y(!1),v=y([]);fe(()=>c.folders,()=>{c.folders?.length&&(d.value=!0,p({filter:[{key:"id",type:"MultiString",data:c.folders}]}).then(k=>{d.value=!1,v.value=k.items.map(u=>({label:u.name,value:u.id}))}))},{immediate:!0});const h={props:c,capitalize:e,dialogRef:g,onDialogOK:m,onDialogCancel:l,folderAutocomplete:s,getFolders:p,isLoading:d,foldersModel:v,SearchAutocomplete:De};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}});function Je(a,i,c,e,g,m){return f(),x(ee,{ref:"dialogRef"},{default:o(()=>[t(j,{class:"q-dialog-plugin column justify-between",style:{"max-width":"1024px","max-height":"90%"}},{default:o(()=>[t(V,{class:"text-h5"},{default:o(()=>[Q(S(e.capitalize(a.$t("recipe.addToFolder"))),1)]),_:1}),t(V,null,{default:o(()=>[t(e.SearchAutocomplete,{label:a.$t("recipeBook.name",2),multiple:!0,"get-list":e.folderAutocomplete,modelValue:e.foldersModel,"onUpdate:modelValue":i[0]||(i[0]=l=>e.foldersModel=l),class:"full-width"},{"selected-item":o(l=>[t(Ae,{class:"ellipsis",removable:"",dense:"",color:"secondary",onRemove:s=>l.removeAtIndex(l.index),tabindex:l.tabindex},{default:o(()=>[Q(S(l.opt?.label),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["label","get-list","modelValue"])]),_:1}),t(Z,{align:"right",class:"q-pa-md"},{default:o(()=>[t(q,{label:a.$t("cancel"),onClick:e.onDialogCancel},null,8,["label","onClick"]),t(q,{color:"primary",label:a.$t("save"),type:"submit",onClick:i[1]||(i[1]=l=>e.onDialogOK(e.foldersModel?.map(s=>typeof s=="string"?s:s.value)))},null,8,["label"])]),_:1})]),_:1})]),_:1},512)}const Xe=N(He,[["render",Je],["__file","addToFolder.vue"]]),Ye=K({__name:"recipeList",setup(a,{expose:i}){i();const c=pe(),{t:e}=$({useScope:"global"}),{getRecipes:g,editRecipe:m,removeRecipe:l}=Re(),{filter:s,search:p,page:d,pageSize:v,sortBy:h}=Ce(W.Recipe),k=y(!1),u=y([]),R=y(0),M=[{title:"delete",icon:he},{title:"share",icon:H},{title:"recipe.addToFolder",icon:_e}];function w(){k.value=!0,g({filter:s.value,search:p.value,page:d.value,pageSize:v.value,sortBy:h.value}).then(r=>{u.value=r.items,R.value=r.totalFiltered}).finally(()=>{k.value=!1})}function F(){}const C={"favorite.add":async r=>{const _=await m(r.id,{favorite:!0});u.value=u.value.map(b=>b.id===_?.id?_:b)},"favorite.remove":async r=>{const _=await m(r.id,{favorite:!1});u.value=u.value.map(b=>b.id===_?.id?_:b)},delete:async r=>{c.dialog({title:be(e("delete")),message:e("deleteConfirmation",{item:r.name}),cancel:!0,persistent:!0}).onOk(async()=>{await l(r.id),w()})},share:async r=>{c.dialog({component:Ee,componentProps:{sharedWith:r.sharedWith}}).onOk(async _=>{const b=await m(r.id,{sharedWith:_});u.value=u.value.map(P=>P.id===b?.id?b:P)})},"recipe.addToFolder":async r=>{c.dialog({component:Xe,componentProps:{folders:r.folders}}).onOk(async _=>{const b=await m(r.id,{folders:_});u.value=u.value.map(P=>P.id===b?.id?b:P)})}},n=(r,_)=>C[r]?.(_);ge(w);const T={$q:c,t:e,getRecipes:g,editRecipe:m,removeRecipe:l,filter:s,search:p,page:d,pageSize:v,sortBy:h,isLoading:k,recipes:u,totalFiltered:R,menuOptions:M,loadRecipes:w,loadSharingRecipes:F,itemMenuOptionHandler:C,menuHandler:n,get FilterType(){return W},get ionAddOutline(){return ve},get ionShareSocialOutline(){return H},SearchFilter:xe,ListItem:Oe,RecipeItemActions:qe,Pagination:ke};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),Ze={class:"gt-sm q-pl-xs"},Ge={key:0,class:"row q-col-gutter-x-md q-col-gutter-y-md"},$e={key:0,class:"flex flex-center full-width"},ea={class:"text-h5"},aa={key:1,class:"row q-gutter-md"};function la(a,i,c,e,g,m){return f(),x(Se,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:o(()=>[t(e.SearchFilter,{onOnChange:e.loadRecipes,"filter-key":e.FilterType.Recipe},{additionalButtons:o(()=>[t(q,{color:"accent",class:"text-capitalize q-mr-sm",outline:"",icon:e.ionShareSocialOutline,onClick:e.loadSharingRecipes},{default:o(()=>[B("span",Ze,S(a.$t("sharing.sharedItems",{item:a.$t("recipe.name",2)})),1),t(le,{anchor:"top middle",offset:[14,30],delay:150,class:"text-capitalize"},{default:o(()=>[Q(S(a.$t("sharing.sharedItems",{item:a.$t("recipe.name")})),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["filter-key"]),e.isLoading?e.isLoading?(f(),z("div",aa,[(f(),z(J,null,X(5,l=>t(ye,{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",height:"300px",key:l})),64))])):Y("",!0):(f(),z("div",Ge,[(f(!0),z(J,null,X(e.recipes,l=>(f(),z("div",{class:"col col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3",key:l.id},[t(e.ListItem,{item:l,"menu-options":e.menuOptions,"on-click-router-name":"RecipeDetail",onOnChange:e.menuHandler},{moreActions:o(()=>[t(e.RecipeItemActions,{item:l},null,8,["item"])]),_:2},1032,["item"])]))),128)),t(e.Pagination,{"filter-key":e.FilterType.Recipe,"total-filtered":e.totalFiltered,onOnChange:e.loadRecipes},null,8,["filter-key","total-filtered"]),e.recipes.length?Y("",!0):(f(),z("div",$e,[B("div",ea,S(a.$t("emptyListMessage")),1)]))])),t(we,{position:"bottom-right",offset:[18,18]},{default:o(()=>[t(q,{fab:"",icon:e.ionAddOutline,color:"primary",to:{name:"RecipeCreate"},disable:e.isLoading},null,8,["icon","disable"])]),_:1})]),_:1})}const Pa=N(Ye,[["render",la],["__file","recipeList.vue"]]);export{Pa as default};
