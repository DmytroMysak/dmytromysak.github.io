import{Q as k}from"./QCardSection-NG0FHRHY.js";import{U as V,ay as N,V as A,I as s,b1 as d,N as R,aX as z,bq as B,aC as U,Y as F,Z as o,ag as r,a1 as n,a0 as i,a4 as w,a5 as h,a3 as O,as as L,av as j}from"./index-CmuCMgBa.js";import{Q as D}from"./QInput-Lm2QrpE2.js";import{Q as M,a as S}from"./QTr-oK-54oaG.js";import{Q as X}from"./QTable-8EEMW2-E.js";import{Q as Y}from"./QCard-C4N2OtfF.js";import{A as Z}from"./QSelect-B1fV5hfF.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";import"./QSeparator-BZj1x5fP.js";import"./QCheckbox-WeQmrjpL.js";import"./use-fullscreen-D4Edpx92.js";import"./History-BRlARYUr.js";import"./is-BddHB8T5.js";import"./use-prevent-scroll-5Ac-51KI.js";import"./rtl-DFPa-2ov.js";import"./format-Dq9uPdyY.js";const E=V({__name:"SettingsIngredientPage",setup(p,{expose:t}){t();const g=N(),{t:e}=A({useScope:"global"}),{getAutocompleteAdvanced:f,deleteFromAutocomplete:_}=Z(),a=s(!1),c=s(),v=s(),u=s([]),l=s({page:1,rowsPerPage:10,rowsNumber:0}),b=[{name:"index",label:"#",field:"index",align:"center"},{name:"name",label:d(e("settings.ingredients.name")),field:"ingredient",align:"center"},{name:"delete",label:d(e("delete")),field:"delete",align:"center"}];async function P(m){const{page:C,rowsPerPage:I}=m?.pagination??l.value;a.value=!0;const{totalFiltered:T,items:q}=await f("ingredients",{search:v.value,page:C,pageSize:I});l.value.rowsNumber=T,l.value.page=C,l.value.rowsPerPage=I,u.value=q,a.value=!1}async function x(m){a.value||g.dialog({title:d(e("delete")),message:e("deleteConfirmation",{item:u.value[m]}),cancel:!0,persistent:!0}).onOk(async()=>{a.value=!0,await _("ingredients",u.value[m]),c?.value.requestServerInteraction()})}function y(){v.value=""}R(()=>{setTimeout(()=>c?.value.requestServerInteraction())});const Q={$q:g,t:e,getAutocompleteAdvanced:f,deleteFromAutocomplete:_,isLoading:a,tableRef:c,search:v,rows:u,pagination:l,columns:b,onRequest:P,deleteItem:x,clearSearch:y,capitalize:d,get ionTrashOutline(){return z},get ionSearchOutline(){return B},get ionCloseOutline(){return U}};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}});function G(p,t,g,e,f,_){return o(),r(Y,{class:"col"},{default:n(()=>[i(k,null,{default:n(()=>[w(h(e.capitalize(p.$t("settings.ingredients.description"))),1)]),_:1}),i(k,null,{default:n(()=>[i(X,{ref:"tableRef",rows:e.rows,"row-key":"index",pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=a=>e.pagination=a),filter:e.search,loading:e.isLoading,"rows-per-page-options":[10,20,50,100],onRequest:e.onRequest,columns:e.columns},{"top-right":n(()=>[i(D,{dense:"",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=a=>e.search=a),label:p.$t("search"),debounce:"350",color:"secondary"},{append:n(()=>[e.search?(o(),r(O,{key:0,name:e.ionCloseOutline,onClick:e.clearSearch,class:"cursor-pointer"},null,8,["name"])):L("",!0),i(O,{name:e.ionSearchOutline},null,8,["name"])]),_:1},8,["modelValue","label"])]),body:n(a=>[(o(),r(M,{props:a,key:`m_${a.row.index}`},{default:n(()=>[(o(),r(S,{"auto-width":"",key:e.columns[0].name,props:a},{default:n(()=>[w(h(a.rowIndex+1),1)]),_:2},1032,["props"])),(o(),r(S,{"auto-width":"",key:e.columns[1].name,props:a},{default:n(()=>[w(h(a.row),1)]),_:2},1032,["props"])),(o(),r(S,{"auto-width":"",key:e.columns[1].name,props:a},{default:n(()=>[i(j,{round:"",flat:"",icon:e.ionTrashOutline,onClick:c=>e.deleteItem(a.rowIndex),color:"secondary"},null,8,["icon","onClick"])]),_:2},1032,["props"]))]),_:2},1032,["props"]))]),_:1},8,["rows","pagination","filter","loading"])]),_:1})]),_:1})}const de=F(E,[["render",G],["__file","SettingsIngredientPage.vue"]]);export{de as default};
