import{Q as g}from"./QCardSection-NG0FHRHY.js";import{Q as b}from"./QCard-C4N2OtfF.js";import{aV as w,U as x,V as q,ay as C,I as d,b9 as O,cg as P,Y as E,Z as v,ag as V,a1 as s,Q as I,a0 as t,a4 as _,a5 as y,bm as M,a3 as T,av as j,b0 as B}from"./index-CmuCMgBa.js";import{Q}from"./QInput-Lm2QrpE2.js";import{Q as D}from"./QForm-BI170nwI.js";import{Q as L}from"./QPage-Blsos2c0.js";import{V as N}from"./validation.service-Bh9qf873.js";import"./uid-Bzmka5Fh.js";import"./debounce-Dh_zIq8Y.js";const U=w(()=>{const a=new Headers;a.append("Accept","application/json"),a.append("Content-Type","application/json");async function o(i,e){try{const l=await fetch("",{headers:a,method:"POST",mode:"same-origin",body:JSON.stringify({from:i,text:e})});if(l.status!==200)throw new Error(l.statusText)}catch(l){throw console.error(l),new Error("suggestion.error")}}return{sendEmail:o}}),k=x({__name:"suggestionPage",setup(a,{expose:o}){o();const{t:i}=q({useScope:"global"}),e=C(),{sendEmail:l}=U(),{required:f,email:r}=N(),u=d(),m=d(),c=d(),n=d(!1);async function S(){if(n.value)return;if(n.value=!0,!await u.value.validate()){n.value=!1;return}l(m.value,c.value).then(()=>e.notify({color:"green-4",position:"top",textColor:"white",icon:P,message:i("suggestion.submitted")})).catch(h=>e.dialog({title:i("suggestion.errorHeader"),message:i(h.message)})).finally(()=>{n.value=!1,u.value.reset(),u.value.resetValidation(),m.value=void 0,c.value=void 0})}const p={t:i,$q:e,sendEmail:l,required:f,email:r,form:u,emailValue:m,textValue:c,isLoading:n,onSubmit:S,get ionMailOutline(){return O}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}});function H(a,o,i,e,l,f){return v(),V(L,{class:"q-pa-md q-col-gutter-x-md q-col-gutter-y-md"},{default:s(()=>[I((v(),V(b,{class:"q-mb-lg"},{default:s(()=>[t(g,{class:"text-h4"},{default:s(()=>[_(y(a.$t("suggestion.title")),1)]),_:1}),t(g,{class:"text-subtitle2"},{default:s(()=>[_(y(a.$t("suggestion.description")),1)]),_:1})]),_:1})),[[B]]),t(b,null,{default:s(()=>[t(g,null,{default:s(()=>[t(D,{class:"q-gutter-md",ref:"form",onSubmit:M(e.onSubmit,["prevent"])},{default:s(()=>[t(Q,{modelValue:e.emailValue,"onUpdate:modelValue":o[0]||(o[0]=r=>e.emailValue=r),type:"email",label:a.$t("suggestion.email"),clearable:"",filled:"",rules:[e.email,e.required]},{prepend:s(()=>[t(T,{name:e.ionMailOutline},null,8,["name"])]),_:1},8,["modelValue","label","rules"]),t(Q,{modelValue:e.textValue,"onUpdate:modelValue":o[1]||(o[1]=r=>e.textValue=r),filled:"",type:"textarea",label:a.$t("suggestion.text"),rules:[e.required]},null,8,["modelValue","label","rules"]),t(j,{label:a.$t("suggestion.submit"),type:"submit",color:"primary",disable:e.isLoading,loading:e.isLoading},null,8,["label","disable","loading"])]),_:1},512)]),_:1})]),_:1})]),_:1})}const X=E(k,[["render",H],["__file","suggestionPage.vue"]]);export{X as default};
